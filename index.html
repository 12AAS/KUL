<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Aashis Sapkota | IT & Cybersecurity Professional</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Leaflet for Maps -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    
    <!-- Chart.js for Analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --primary-light: #3b82f6;
            --primary-soft: #dbeafe;
            --secondary: #0f172a;
            --accent: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            --dark: #0f172a;
            --gray: #64748b;
            --gray-light: #94a3b8;
            --gray-soft: #e2e8f0;
            --light: #f8fafc;
            --white: #ffffff;
            
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
            
            --radius: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
        }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: 70px;
        }

        body {
            font-family: 'Inter', sans-serif;
            color: var(--dark);
            background: var(--light);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            box-shadow: var(--shadow-sm);
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem 1.5rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--primary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            transition: transform 0.3s;
        }

        .logo:hover .logo-icon {
            transform: rotate(10deg) scale(1.1);
        }

        .logo-text {
            font-weight: 700;
            font-size: 1.2rem;
            color: var(--dark);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-link {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            font-size: 0.95rem;
            transition: color 0.3s;
            position: relative;
        }

        .nav-link::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary);
            transition: width 0.3s;
        }

        .nav-link:hover::after {
            width: 100%;
        }

        .nav-link:hover {
            color: var(--primary);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--dark);
        }

        /* Admin Button */
        .admin-btn {
            position: fixed;
            top: 70px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
            border-radius: 50%;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            z-index: 999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            font-size: 1.2rem;
        }

        .admin-btn:hover {
            background: var(--primary);
            color: white;
            transform: scale(1.1);
        }

        .admin-btn.active {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        /* Auth Modal */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15,23,42,0.98);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            backdrop-filter: blur(10px);
        }

        .auth-modal.active {
            display: flex;
        }

        .auth-box {
            background: white;
            padding: 2rem;
            border-radius: var(--radius-lg);
            width: 90%;
            max-width: 400px;
            animation: slideUp 0.3s;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .auth-input {
            width: 100%;
            padding: 1rem;
            margin: 1rem 0;
            border: 2px solid var(--gray-soft);
            border-radius: var(--radius);
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .auth-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .auth-btn {
            width: 100%;
            padding: 1rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }

        .auth-btn:hover {
            background: var(--primary-dark);
        }

        .verification-code {
            display: flex;
            gap: 0.5rem;
            margin: 1.5rem 0;
            justify-content: center;
        }

        .code-input {
            width: 50px;
            height: 60px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            border: 2px solid var(--gray-soft);
            border-radius: var(--radius);
        }

        .code-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Admin Panel */
        .admin-panel {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 600px;
            height: 100vh;
            background: white;
            box-shadow: var(--shadow-xl);
            z-index: 1001;
            transition: right 0.3s;
            overflow-y: auto;
        }

        .admin-panel.active {
            right: 0;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            background: var(--primary);
            color: white;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .admin-header h2 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.2rem;
        }

        .admin-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }

        .admin-close:hover {
            background: rgba(255,255,255,0.2);
        }

        .admin-section {
            padding: 1.5rem;
            border-bottom: 1px solid var(--gray-soft);
        }

        .admin-section h3 {
            margin-bottom: 1rem;
            color: var(--dark);
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .admin-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .stat-card {
            background: var(--light);
            padding: 1rem;
            border-radius: var(--radius);
            text-align: center;
            border: 1px solid var(--gray-soft);
        }

        .stat-icon {
            font-size: 1.5rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--dark);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .visitor-map {
            height: 250px;
            margin: 1rem 0;
            border-radius: var(--radius);
            border: 1px solid var(--gray-soft);
        }

        .visitor-table {
            width: 100%;
            overflow-x: auto;
            display: block;
        }

        .visitor-table table {
            width: 100%;
            border-collapse: collapse;
            min-width: 800px;
        }

        .visitor-table th {
            background: var(--primary-soft);
            padding: 0.8rem;
            text-align: left;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .visitor-table td {
            padding: 0.8rem;
            border-bottom: 1px solid var(--gray-soft);
            font-size: 0.85rem;
        }

        .device-badge {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .device-mobile { background: #3b82f6; color: white; }
        .device-tablet { background: #8b5cf6; color: white; }
        .device-desktop { background: #10b981; color: white; }

        /* Upload Area */
        .upload-area {
            border: 2px dashed var(--gray-soft);
            border-radius: var(--radius);
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: border-color 0.3s;
            background: var(--light);
        }

        .upload-area:hover {
            border-color: var(--primary);
        }

        .upload-area i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .image-preview {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .image-preview img {
            width: 100%;
            height: 80px;
            object-fit: cover;
            border-radius: var(--radius);
            border: 2px solid white;
            box-shadow: var(--shadow);
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.3rem;
            font-weight: 500;
            font-size: 0.9rem;
            color: var(--gray);
        }

        .form-control {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid var(--gray-soft);
            border-radius: var(--radius);
            font-size: 0.95rem;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }

        textarea.form-control {
            min-height: 100px;
            resize: vertical;
        }

        /* Buttons */
        .btn {
            padding: 0.8rem 1.5rem;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.95rem;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
        }

        .btn-block {
            width: 100%;
        }

        /* Hero Section */
        .hero {
            padding: 100px 0 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .hero-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: center;
        }

        .hero-title {
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 800;
            margin-bottom: 1rem;
            line-height: 1.2;
        }

        .hero-subtitle {
            font-size: 1.2rem;
            margin-bottom: 1rem;
            opacity: 0.9;
        }

        .profile-image {
            width: 100%;
            max-width: 350px;
            height: 350px;
            border-radius: 50%;
            overflow: hidden;
            border: 4px solid white;
            box-shadow: var(--shadow-xl);
            margin: 0 auto;
        }

        .profile-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .profile-image .no-image {
            width: 100%;
            height: 100%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5rem;
            font-weight: 700;
            color: white;
        }

        /* Section Styles */
        section {
            padding: 60px 0;
        }

        .section-title {
            text-align: center;
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--dark);
            position: relative;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: var(--primary);
        }

        .section-subtitle {
            text-align: center;
            color: var(--gray);
            margin-bottom: 2rem;
        }

        /* Timeline */
        .timeline {
            max-width: 800px;
            margin: 0 auto;
        }

        .timeline-item {
            background: white;
            padding: 1.5rem;
            border-radius: var(--radius);
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow);
            border: 1px solid var(--gray-soft);
            position: relative;
        }

        .timeline-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .timeline-title {
            font-size: 1.2rem;
            color: var(--primary);
        }

        .timeline-date {
            color: var(--gray);
            font-size: 0.9rem;
            background: var(--primary-soft);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
        }

        /* Projects Grid */
        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        .project-card {
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s;
        }

        .project-card:hover {
            transform: translateY(-5px);
        }

        .project-image {
            height: 180px;
            background: var(--primary-soft);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: var(--primary);
        }

        .project-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .project-content {
            padding: 1.5rem;
        }

        .project-title {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: var(--dark);
        }

        .project-skills {
            display: flex;
            flex-wrap: wrap;
            gap: 0.3rem;
            margin-top: 1rem;
        }

        .skill-tag {
            background: var(--primary-soft);
            color: var(--primary);
            padding: 0.2rem 0.5rem;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        /* Contact Section */
        .contact {
            background: var(--secondary);
            color: white;
        }

        .contact .section-title {
            color: white;
        }

        .contact-form {
            max-width: 600px;
            margin: 2rem auto;
            background: rgba(255,255,255,0.1);
            padding: 2rem;
            border-radius: var(--radius);
            backdrop-filter: blur(10px);
        }

        .contact-form input,
        .contact-form textarea {
            width: 100%;
            padding: 1rem;
            margin-bottom: 1rem;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: var(--radius);
            color: white;
        }

        .contact-form input::placeholder,
        .contact-form textarea::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .contact-form input:focus,
        .contact-form textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .submit-btn {
            width: 100%;
            padding: 1rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
        }

        .submit-btn:hover {
            background: var(--primary-dark);
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .social-link {
            width: 45px;
            height: 45px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            transition: all 0.3s;
            font-size: 1.2rem;
        }

        .social-link:hover {
            background: var(--primary);
            transform: translateY(-5px);
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 2rem 0;
            text-align: center;
        }

        .footer-text {
            color: var(--gray-light);
            margin: 1rem 0;
        }

        .copyright {
            color: var(--gray);
            font-size: 0.9rem;
            margin-top: 2rem;
        }

        /* Alerts */
        .alert {
            position: fixed;
            top: 80px;
            right: 20px;
            padding: 1rem 1.5rem;
            background: white;
            border-left: 4px solid;
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            z-index: 1002;
            display: none;
            max-width: 350px;
        }

        .alert.success { border-color: var(--success); color: var(--success); }
        .alert.danger { border-color: var(--danger); color: var(--danger); }
        .alert.info { border-color: var(--info); color: var(--info); }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .mobile-menu-btn {
                display: block;
            }

            .hero-content {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 2rem;
            }

            .hero-title {
                font-size: 2rem;
            }

            .profile-image {
                max-width: 250px;
                height: 250px;
            }

            .admin-btn {
                top: 60px;
                width: 45px;
                height: 45px;
                font-size: 1rem;
            }

            .admin-panel {
                max-width: 100%;
            }

            .projects-grid {
                grid-template-columns: 1fr;
            }

            .alert {
                left: 20px;
                max-width: none;
            }
        }
    </style>
</head>
<body>
    <!-- Admin Button -->
    <button class="admin-btn" id="adminBtn" onclick="toggleAdmin()">
        <i class="fas fa-user-shield"></i>
    </button>

    <!-- Alert Container -->
    <div class="alert" id="alert"></div>

    <!-- Auth Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-box">
            <h3 style="margin-bottom: 1rem; color: var(--primary);">Admin Login</h3>
            <p style="color: var(--gray); margin-bottom: 1rem;">sapkotaaashis62@gmail.com</p>
            
            <div id="passwordForm">
                <input type="password" id="loginPassword" class="auth-input" placeholder="Enter password" onkeypress="if(event.key==='Enter') verifyPassword()">
                <button class="auth-btn" onclick="verifyPassword()">Send Code</button>
            </div>

            <div id="verificationSection" style="display: none;">
                <p style="margin-bottom: 1rem;">Enter 6-digit code</p>
                <div class="verification-code">
                    <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 0)" onkeyup="handleCodeKey(event, this, 0)">
                    <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 1)" onkeyup="handleCodeKey(event, this, 1)">
                    <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 2)" onkeyup="handleCodeKey(event, this, 2)">
                    <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 3)" onkeyup="handleCodeKey(event, this, 3)">
                    <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 4)" onkeyup="handleCodeKey(event, this, 4)">
                    <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 5)" onkeyup="handleCodeKey(event, this, 5)">
                </div>
                <button class="auth-btn" onclick="verifyCode()">Verify</button>
                <p style="text-align: center; margin-top: 1rem;">
                    <a href="#" onclick="resendCode()" style="color: var(--primary);">Resend Code</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-header">
            <h2><i class="fas fa-user-shield"></i> Admin Dashboard</h2>
            <button class="admin-close" onclick="closeAdmin()">&times;</button>
        </div>

        <!-- Visitor Tracking Section -->
        <div class="admin-section">
            <h3><i class="fas fa-chart-line"></i> Visitor Analytics</h3>
            
            <div class="admin-grid">
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-users"></i></div>
                    <div class="stat-number" id="totalVisitors">0</div>
                    <div class="stat-label">Total Visits</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-user-plus"></i></div>
                    <div class="stat-number" id="uniqueVisitors">0</div>
                    <div class="stat-label">Unique</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-calendar-day"></i></div>
                    <div class="stat-number" id="todayVisitors">0</div>
                    <div class="stat-label">Today</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-clock"></i></div>
                    <div class="stat-number" id="activeNow">0</div>
                    <div class="stat-label">Active</div>
                </div>
            </div>

            <div class="admin-grid">
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-mobile-alt"></i></div>
                    <div class="stat-number" id="mobileCount">0</div>
                    <div class="stat-label">Mobile</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-tablet-alt"></i></div>
                    <div class="stat-number" id="tabletCount">0</div>
                    <div class="stat-label">Tablet</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-desktop"></i></div>
                    <div class="stat-number" id="desktopCount">0</div>
                    <div class="stat-label">Desktop</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-globe"></i></div>
                    <div class="stat-number" id="countryCount">0</div>
                    <div class="stat-label">Countries</div>
                </div>
            </div>

            <!-- Visitor Map -->
            <div id="visitorMap" class="visitor-map"></div>

            <!-- Recent Visitors Table -->
            <div class="visitor-table">
                <table>
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>IP</th>
                            <th>Location</th>
                            <th>Device</th>
                            <th>Browser</th>
                            <th>Page</th>
                        </tr>
                    </thead>
                    <tbody id="visitorTableBody"></tbody>
                </table>
            </div>

            <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                <button class="btn btn-primary btn-sm" onclick="exportVisitorData()">
                    <i class="fas fa-download"></i> Export CSV
                </button>
                <button class="btn btn-danger btn-sm" onclick="clearVisitorData()">
                    <i class="fas fa-trash"></i> Clear
                </button>
            </div>
        </div>

        <!-- Profile Photos Section -->
        <div class="admin-section">
            <h3><i class="fas fa-camera"></i> Profile Photos</h3>
            
            <!-- Main Profile Photo -->
            <div class="form-group">
                <label class="form-label">Main Profile Photo</label>
                <div class="upload-area" onclick="document.getElementById('mainPhotoUpload').click()">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>Click to upload main profile photo</p>
                </div>
                <input type="file" id="mainPhotoUpload" accept="image/*" style="display: none;" onchange="uploadPhoto(this, 'main')">
                <div class="image-preview" id="mainPhotoPreview"></div>
            </div>

            <!-- Education Photos -->
            <div class="form-group">
                <label class="form-label">Education Photos</label>
                <div class="upload-area" onclick="document.getElementById('eduPhotosUpload').click()">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>Click to upload education photos</p>
                </div>
                <input type="file" id="eduPhotosUpload" accept="image/*" multiple style="display: none;" onchange="uploadPhotos(this, 'edu')">
                <div class="image-preview" id="eduPhotosPreview"></div>
            </div>

            <!-- Graduation Photos -->
            <div class="form-group">
                <label class="form-label">Graduation Photos</label>
                <div class="upload-area" onclick="document.getElementById('gradPhotosUpload').click()">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>Click to upload graduation photos</p>
                </div>
                <input type="file" id="gradPhotosUpload" accept="image/*" multiple style="display: none;" onchange="uploadPhotos(this, 'grad')">
                <div class="image-preview" id="gradPhotosPreview"></div>
            </div>

            <!-- Projects Photos -->
            <div class="form-group">
                <label class="form-label">Projects Photos</label>
                <div class="upload-area" onclick="document.getElementById('projectPhotosUpload').click()">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>Click to upload project photos</p>
                </div>
                <input type="file" id="projectPhotosUpload" accept="image/*" multiple style="display: none;" onchange="uploadPhotos(this, 'project')">
                <div class="image-preview" id="projectPhotosPreview"></div>
            </div>
        </div>

        <!-- Personal Info Section -->
        <div class="admin-section">
            <h3><i class="fas fa-user"></i> Personal Information</h3>
            
            <div class="form-group">
                <label class="form-label">Full Name</label>
                <input type="text" id="editName" class="form-control" value="Aashis Sapkota">
            </div>
            
            <div class="form-group">
                <label class="form-label">Title</label>
                <input type="text" id="editTitle" class="form-control" value="IT & Cybersecurity Student">
            </div>
            
            <div class="form-group">
                <label class="form-label">Email</label>
                <input type="email" id="editEmail" class="form-control" value="sapkotaaashis62@gmail.com">
            </div>
            
            <div class="form-group">
                <label class="form-label">About Me</label>
                <textarea id="editAbout" class="form-control">Hi! I'm beginning my journey in IT, with a strong interest in tech support, cybersecurity, and networking. I've completed a Diploma and Advanced Diploma in IT, and I'm now studying for my Bachelor of Information Technology.

I'm learning to troubleshoot technical issues, assist users with IT problems, and understand how systems work. I've started exploring Python, Power BI, and Tableau, and I'm excited to keep growing my knowledge.

I enjoy helping people and solving problems, and I'm looking forward to gaining hands-on experience in IT support roles.</textarea>
            </div>
            
            <button class="btn btn-success btn-block" onclick="savePersonalInfo()">
                <i class="fas fa-save"></i> Save Personal Info
            </button>
        </div>

        <!-- Education Section -->
        <div class="admin-section">
            <h3><i class="fas fa-graduation-cap"></i> Education</h3>
            
            <div id="educationList"></div>
            
            <button class="btn btn-primary btn-sm" onclick="addEducation()">
                <i class="fas fa-plus"></i> Add Education
            </button>
            <button class="btn btn-success btn-sm" onclick="saveEducation()">
                <i class="fas fa-save"></i> Save All
            </button>
        </div>

        <!-- Experience Section -->
        <div class="admin-section">
            <h3><i class="fas fa-briefcase"></i> Experience</h3>
            
            <div id="experienceList"></div>
            
            <button class="btn btn-primary btn-sm" onclick="addExperience()">
                <i class="fas fa-plus"></i> Add Experience
            </button>
            <button class="btn btn-success btn-sm" onclick="saveExperience()">
                <i class="fas fa-save"></i> Save All
            </button>
        </div>

        <!-- Projects Section -->
        <div class="admin-section">
            <h3><i class="fas fa-project-diagram"></i> Projects</h3>
            
            <div id="projectsList"></div>
            
            <button class="btn btn-primary btn-sm" onclick="addProject()">
                <i class="fas fa-plus"></i> Add Project
            </button>
            <button class="btn btn-success btn-sm" onclick="saveProjects()">
                <i class="fas fa-save"></i> Save All
            </button>
        </div>

        <!-- Social Links Section -->
        <div class="admin-section">
            <h3><i class="fas fa-share-alt"></i> Social Links</h3>
            
            <div class="form-group">
                <label class="form-label">LinkedIn</label>
                <input type="url" id="editLinkedin" class="form-control">
            </div>
            
            <div class="form-group">
                <label class="form-label">GitHub</label>
                <input type="url" id="editGithub" class="form-control">
            </div>
            
            <div class="form-group">
                <label class="form-label">Twitter</label>
                <input type="url" id="editTwitter" class="form-control">
            </div>
            
            <button class="btn btn-success btn-block" onclick="saveSocialLinks()">
                <i class="fas fa-save"></i> Save Social Links
            </button>
        </div>

        <!-- Logout Button -->
        <div class="admin-section">
            <button class="btn btn-danger btn-block" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </div>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="#" class="logo">
                <div class="logo-icon">AS</div>
                <span class="logo-text" id="navName">Aashis Sapkota</span>
            </a>
            
            <ul class="nav-links">
                <li><a href="#home" class="nav-link">Home</a></li>
                <li><a href="#about" class="nav-link">About</a></li>
                <li><a href="#experience" class="nav-link">Experience</a></li>
                <li><a href="#education" class="nav-link">Education</a></li>
                <li><a href="#projects" class="nav-link">Projects</a></li>
                <li><a href="#contact" class="nav-link">Contact</a></li>
            </ul>
            
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        
        <div class="mobile-nav" id="mobileNav" style="display: none; background: white; padding: 1rem;">
            <a href="#home" class="nav-link" style="display: block; padding: 0.5rem;">Home</a>
            <a href="#about" class="nav-link" style="display: block; padding: 0.5rem;">About</a>
            <a href="#experience" class="nav-link" style="display: block; padding: 0.5rem;">Experience</a>
            <a href="#education" class="nav-link" style="display: block; padding: 0.5rem;">Education</a>
            <a href="#projects" class="nav-link" style="display: block; padding: 0.5rem;">Projects</a>
            <a href="#contact" class="nav-link" style="display: block; padding: 0.5rem;">Contact</a>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <div class="hero-content">
                <div>
                    <h1 class="hero-title" id="heroName">Aashis Sapkota</h1>
                    <h2 class="hero-subtitle" id="heroTitle">IT & Cybersecurity Student</h2>
                    <p class="hero-description" id="heroDescription">Passionate about technology and solving real-world problems through innovation and security.</p>
                    <div class="social-links" id="heroSocialLinks"></div>
                </div>
                <div class="profile-image" id="profileImageContainer">
                    <div class="no-image" id="profileInitial">AS</div>
                    <img id="profileImage" src="" alt="Profile" style="display: none;">
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="about" id="about">
        <div class="container">
            <h2 class="section-title">About Me</h2>
            <p class="section-subtitle" id="aboutSubtitle">IT & Cybersecurity Student</p>
            <div class="about-text" id="aboutText" style="max-width: 800px; margin: 0 auto; text-align: center;">
                <p>Hi! I'm beginning my journey in IT, with a strong interest in tech support, cybersecurity, and networking. I've completed a Diploma and Advanced Diploma in IT, and I'm now studying for my Bachelor of Information Technology.</p>
                <p>I'm learning to troubleshoot technical issues, assist users with IT problems, and understand how systems work. I've started exploring Python, Power BI, and Tableau, and I'm excited to keep growing my knowledge.</p>
                <p>I enjoy helping people and solving problems, and I'm looking forward to gaining hands-on experience in IT support roles.</p>
            </div>
        </div>
    </section>

    <!-- Experience Section -->
    <section class="experience" id="experience">
        <div class="container">
            <h2 class="section-title">Experience</h2>
            <p class="section-subtitle">My professional journey</p>
            <div class="timeline" id="experienceTimeline"></div>
        </div>
    </section>

    <!-- Education Section -->
    <section class="education" id="education">
        <div class="container">
            <h2 class="section-title">Education</h2>
            <p class="section-subtitle">My academic background</p>
            <div class="timeline" id="educationTimeline"></div>
        </div>
    </section>

    <!-- Projects Section -->
    <section class="projects" id="projects">
        <div class="container">
            <h2 class="section-title">Projects</h2>
            <p class="section-subtitle">My recent work</p>
            <div class="projects-grid" id="projectsGrid"></div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact" id="contact">
        <div class="container">
            <h2 class="section-title">Let's Connect</h2>
            <p class="section-subtitle">Open to opportunities and collaborations</p>
            
            <form class="contact-form" id="contactForm">
                <input type="text" id="contactName" placeholder="Your Name" required>
                <input type="email" id="contactEmail" placeholder="Your Email" required>
                <textarea id="contactMessage" rows="4" placeholder="Your Message" required></textarea>
                <button type="submit" class="submit-btn">Send Message</button>
            </form>
            
            <div class="social-links" id="contactSocialLinks"></div>
            <p style="text-align: center;">
                <i class="fas fa-envelope"></i> 
                <a href="mailto:sapkotaaashis62@gmail.com" id="footerEmail" style="color: white;">sapkotaaashis62@gmail.com</a>
            </p>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-logo" id="footerName">Aashis Sapkota</div>
            <p class="footer-text" id="footerBio">IT & Cybersecurity Student | Learning by Doing</p>
            <div class="social-links" id="footerSocialLinks"></div>
            <div class="copyright">
                &copy; 2026 Aashis Sapkota. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <script>
        // Configuration
        const CONFIG = {
            password: 'Kusu123',
            sessionDuration: 30 * 60 * 1000,
            codeExpiry: 10 * 60 * 1000
        };

        // State
        let state = {
            isLoggedIn: false,
            sessionStart: null,
            verificationCode: null,
            codeExpiry: null,
            attempts: 0,
            maxAttempts: 3
        };

        // Data storage
        let visitors = JSON.parse(localStorage.getItem('visitors')) || [];
        let clicks = JSON.parse(localStorage.getItem('clicks')) || [];
        let map = null;

        // Initialize visitor tracking
        async function initTracking() {
            const visitorId = localStorage.getItem('visitorId') || generateId();
            localStorage.setItem('visitorId', visitorId);

            try {
                // Get location data from multiple sources
                let locationData = {};
                
                try {
                    const response = await fetch('https://ipapi.co/json/');
                    locationData = await response.json();
                } catch (e) {
                    try {
                        const response = await fetch('https://ipinfo.io/json');
                        const data = await response.json();
                        locationData = {
                            ip: data.ip,
                            city: data.city,
                            region: data.region,
                            country: data.country,
                            loc: data.loc
                        };
                    } catch (e) {
                        console.log('Location fetch failed');
                    }
                }

                const visitor = {
                    id: visitorId,
                    timestamp: new Date().toISOString(),
                    ip: locationData.ip || 'Unknown',
                    city: locationData.city || 'Unknown',
                    region: locationData.region || 'Unknown',
                    country: locationData.country || 'Unknown',
                    lat: locationData.latitude || (locationData.loc ? locationData.loc.split(',')[0] : null),
                    lon: locationData.longitude || (locationData.loc ? locationData.loc.split(',')[1] : null),
                    device: getDeviceInfo(),
                    browser: getBrowserInfo(),
                    os: getOSInfo(),
                    page: window.location.pathname,
                    referrer: document.referrer || 'Direct',
                    startTime: Date.now(),
                    lastActive: Date.now()
                };

                visitors.push(visitor);
                if (visitors.length > 500) visitors.shift();
                localStorage.setItem('visitors', JSON.stringify(visitors));

                // Update active time periodically
                setInterval(() => {
                    const lastVisitor = visitors.find(v => v.id === visitorId);
                    if (lastVisitor) {
                        lastVisitor.lastActive = Date.now();
                        localStorage.setItem('visitors', JSON.stringify(visitors));
                    }
                }, 30000);

            } catch (error) {
                console.log('Tracking error:', error);
            }
        }

        function getDeviceInfo() {
            const ua = navigator.userAgent;
            if (/(tablet|ipad|playbook|silk)|(android(?!.*mobi))/i.test(ua)) return 'Tablet';
            if (/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Kindle|Silk-Accelerated|(hpw|web)OS|Opera M(obi|ini)/.test(ua)) return 'Mobile';
            return 'Desktop';
        }

        function getBrowserInfo() {
            const ua = navigator.userAgent;
            if (ua.indexOf('Firefox') > -1) return 'Firefox';
            if (ua.indexOf('Chrome') > -1) return 'Chrome';
            if (ua.indexOf('Safari') > -1) return 'Safari';
            if (ua.indexOf('Edge') > -1) return 'Edge';
            if (ua.indexOf('Opera') > -1) return 'Opera';
            return 'Unknown';
        }

        function getOSInfo() {
            const ua = navigator.userAgent;
            if (ua.indexOf('Windows') > -1) return 'Windows';
            if (ua.indexOf('Mac') > -1) return 'MacOS';
            if (ua.indexOf('Linux') > -1) return 'Linux';
            if (ua.indexOf('Android') > -1) return 'Android';
            if (ua.indexOf('iOS') > -1) return 'iOS';
            return 'Unknown';
        }

        function generateId() {
            return 'id_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        // Update visitor stats
        function updateVisitorStats() {
            if (!state.isLoggedIn) return;

            document.getElementById('totalVisitors').textContent = visitors.length;
            
            const unique = new Set(visitors.map(v => v.id)).size;
            document.getElementById('uniqueVisitors').textContent = unique;
            
            const today = new Date().toDateString();
            const todayCount = visitors.filter(v => new Date(v.timestamp).toDateString() === today).length;
            document.getElementById('todayVisitors').textContent = todayCount;
            
            const fiveMinAgo = Date.now() - (5 * 60 * 1000);
            const activeNow = visitors.filter(v => v.lastActive > fiveMinAgo).length;
            document.getElementById('activeNow').textContent = activeNow;

            // Device stats
            const mobile = visitors.filter(v => v.device === 'Mobile').length;
            const tablet = visitors.filter(v => v.device === 'Tablet').length;
            const desktop = visitors.filter(v => v.device === 'Desktop').length;
            document.getElementById('mobileCount').textContent = mobile;
            document.getElementById('tabletCount').textContent = tablet;
            document.getElementById('desktopCount').textContent = desktop;

            const countries = new Set(visitors.filter(v => v.country).map(v => v.country)).size;
            document.getElementById('countryCount').textContent = countries;

            // Update table
            const tbody = document.getElementById('visitorTableBody');
            tbody.innerHTML = '';

            visitors.slice(-20).reverse().forEach(v => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${new Date(v.timestamp).toLocaleTimeString()}</td>
                    <td>${v.ip}</td>
                    <td>${v.city}, ${v.country}</td>
                    <td><span class="device-badge device-${v.device.toLowerCase()}">${v.device}</span></td>
                    <td>${v.browser}</td>
                    <td>${v.page}</td>
                `;
            });

            // Update map
            updateMap();
        }

        // Initialize map
        function initMap() {
            if (!document.getElementById('visitorMap') || map) return;
            
            map = L.map('visitorMap').setView([20, 0], 2);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: 'Â© OpenStreetMap'
            }).addTo(map);
        }

        function updateMap() {
            if (!map) initMap();
            if (!map) return;

            // Clear existing markers
            map.eachLayer(layer => {
                if (layer instanceof L.Marker) map.removeLayer(layer);
            });

            // Group visitors by location
            const locations = {};
            visitors.forEach(v => {
                if (v.lat && v.lon) {
                    const key = `${v.lat},${v.lon}`;
                    if (!locations[key]) {
                        locations[key] = {
                            lat: v.lat,
                            lon: v.lon,
                            city: v.city,
                            country: v.country,
                            count: 1
                        };
                    } else {
                        locations[key].count++;
                    }
                }
            });

            // Add markers
            Object.values(locations).forEach(loc => {
                const marker = L.marker([loc.lat, loc.lon]).addTo(map);
                marker.bindPopup(`<b>${loc.city}, ${loc.country}</b><br>${loc.count} visitor${loc.count > 1 ? 's' : ''}`);
            });
        }

        // Export data
        function exportVisitorData() {
            const csv = visitors.map(v => {
                return `${v.timestamp},${v.ip},${v.city},${v.country},${v.device},${v.browser},${v.page}`;
            }).join('\n');
            
            const blob = new Blob(['Timestamp,IP,City,Country,Device,Browser,Page\n' + csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'visitors.csv';
            a.click();
            URL.revokeObjectURL(url);
            
            showAlert('Data exported successfully', 'success');
        }

        function clearVisitorData() {
            if (confirm('Clear all visitor data?')) {
                visitors = [];
                localStorage.setItem('visitors', JSON.stringify(visitors));
                updateVisitorStats();
                showAlert('Visitor data cleared', 'success');
            }
        }

        // Photo upload using localStorage
        function uploadPhoto(input, type) {
            if (!input.files || !input.files[0]) return;

            const file = input.files[0];
            const reader = new FileReader();

            reader.onload = function(e) {
                const imageData = e.target.result;
                
                if (type === 'main') {
                    localStorage.setItem('profilePhoto', imageData);
                    
                    // Update display
                    const profileImg = document.getElementById('profileImage');
                    const profileInitial = document.getElementById('profileInitial');
                    profileImg.src = imageData;
                    profileImg.style.display = 'block';
                    profileInitial.style.display = 'none';
                    
                    // Preview
                    document.getElementById('mainPhotoPreview').innerHTML = `<img src="${imageData}">`;
                }

                showAlert('Photo uploaded successfully', 'success');
            };

            reader.readAsDataURL(file);
        }

        function uploadPhotos(input, type) {
            if (!input.files || input.files.length === 0) return;

            const photos = [];
            let loaded = 0;

            Array.from(input.files).forEach((file, index) => {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    photos.push(e.target.result);
                    loaded++;
                    
                    if (loaded === input.files.length) {
                        // Save to localStorage
                        const key = type + 'Photos';
                        const existing = JSON.parse(localStorage.getItem(key) || '[]');
                        localStorage.setItem(key, JSON.stringify([...existing, ...photos]));
                        
                        // Update preview
                        const preview = document.getElementById(type + 'PhotosPreview');
                        preview.innerHTML = photos.map(p => `<img src="${p}">`).join('');
                        
                        showAlert('Photos uploaded successfully', 'success');
                    }
                };
                
                reader.readAsDataURL(file);
            });
        }

        // Personal Info
        function savePersonalInfo() {
            const name = document.getElementById('editName').value;
            const title = document.getElementById('editTitle').value;
            const email = document.getElementById('editEmail').value;
            const about = document.getElementById('editAbout').value;

            localStorage.setItem('userName', name);
            localStorage.setItem('userTitle', title);
            localStorage.setItem('userEmail', email);
            localStorage.setItem('userAbout', about);

            // Update display
            document.getElementById('navName').textContent = name;
            document.getElementById('heroName').textContent = name;
            document.getElementById('footerName').textContent = name;
            document.getElementById('heroTitle').textContent = title;
            document.getElementById('aboutSubtitle').textContent = title;
            document.getElementById('footerEmail').textContent = email;
            document.getElementById('footerEmail').href = 'mailto:' + email;
            
            const aboutHtml = about.split('\n').map(p => `<p>${p}</p>`).join('');
            document.getElementById('aboutText').innerHTML = aboutHtml;

            showAlert('Personal info saved', 'success');
        }

        // Education management
        let education = JSON.parse(localStorage.getItem('education')) || [
            {
                institution: 'University of the Sunshine Coast',
                degree: 'Bachelor of Information Technology',
                date: '2025 - 2027',
                description: 'Currently pursuing Bachelor\'s degree in ICT with focus on cybersecurity and networking.'
            },
            {
                institution: 'Southern Academy - SABT',
                degree: 'Diploma & Advanced Diploma in IT',
                date: '2022 - 2025',
                description: 'Completed Diploma and Advanced Diploma with focus on programming, databases, and system analysis.'
            }
        ];

        function loadEducation() {
            const timeline = document.getElementById('educationTimeline');
            timeline.innerHTML = '';

            education.forEach(edu => {
                timeline.innerHTML += `
                    <div class="timeline-item">
                        <div class="timeline-header">
                            <h3 class="timeline-title">${escapeHtml(edu.institution)}</h3>
                            <span class="timeline-date">${escapeHtml(edu.date)}</span>
                        </div>
                        <p class="timeline-company">${escapeHtml(edu.degree)}</p>
                        <p>${escapeHtml(edu.description)}</p>
                    </div>
                `;
            });

            // Admin edit form
            if (state.isLoggedIn) {
                const list = document.getElementById('educationList');
                list.innerHTML = '';

                education.forEach((edu, index) => {
                    list.innerHTML += `
                        <div style="background: var(--light); padding: 1rem; margin-bottom: 1rem; border-radius: var(--radius);">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <strong>Education ${index + 1}</strong>
                                <button class="btn btn-danger btn-sm" onclick="deleteEducation(${index})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Institution" value="${escapeHtml(edu.institution)}" id="eduInst${index}">
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Degree" value="${escapeHtml(edu.degree)}" id="eduDegree${index}">
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Date" value="${escapeHtml(edu.date)}" id="eduDate${index}">
                            </div>
                            <div class="form-group">
                                <textarea class="form-control" placeholder="Description" id="eduDesc${index}" rows="2">${escapeHtml(edu.description)}</textarea>
                            </div>
                        </div>
                    `;
                });
            }
        }

        function addEducation() {
            education.push({
                institution: 'New Institution',
                degree: 'New Degree',
                date: 'Year - Year',
                description: 'Description...'
            });
            loadEducation();
        }

        function deleteEducation(index) {
            education.splice(index, 1);
            loadEducation();
        }

        function saveEducation() {
            for (let i = 0; i < education.length; i++) {
                const inst = document.getElementById(`eduInst${i}`);
                const degree = document.getElementById(`eduDegree${i}`);
                const date = document.getElementById(`eduDate${i}`);
                const desc = document.getElementById(`eduDesc${i}`);
                
                if (inst) education[i].institution = inst.value;
                if (degree) education[i].degree = degree.value;
                if (date) education[i].date = date.value;
                if (desc) education[i].description = desc.value;
            }
            
            localStorage.setItem('education', JSON.stringify(education));
            loadEducation();
            showAlert('Education saved', 'success');
        }

        // Experience management
        let experience = JSON.parse(localStorage.getItem('experience')) || [
            {
                company: 'Clayton Church Homes',
                position: 'Personal Care Assistant',
                date: 'Aug 2023 - Present',
                description: 'Gained technical flexibility, problem-solving, and customer service abilities. Used accessible technology and clear communication.'
            }
        ];

        function loadExperience() {
            const timeline = document.getElementById('experienceTimeline');
            timeline.innerHTML = '';

            experience.forEach(exp => {
                timeline.innerHTML += `
                    <div class="timeline-item">
                        <div class="timeline-header">
                            <h3 class="timeline-title">${escapeHtml(exp.position)}</h3>
                            <span class="timeline-date">${escapeHtml(exp.date)}</span>
                        </div>
                        <p class="timeline-company">${escapeHtml(exp.company)}</p>
                        <p>${escapeHtml(exp.description)}</p>
                    </div>
                `;
            });

            if (state.isLoggedIn) {
                const list = document.getElementById('experienceList');
                list.innerHTML = '';

                experience.forEach((exp, index) => {
                    list.innerHTML += `
                        <div style="background: var(--light); padding: 1rem; margin-bottom: 1rem; border-radius: var(--radius);">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <strong>Experience ${index + 1}</strong>
                                <button class="btn btn-danger btn-sm" onclick="deleteExperience(${index})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Company" value="${escapeHtml(exp.company)}" id="expCompany${index}">
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Position" value="${escapeHtml(exp.position)}" id="expPosition${index}">
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Date" value="${escapeHtml(exp.date)}" id="expDate${index}">
                            </div>
                            <div class="form-group">
                                <textarea class="form-control" placeholder="Description" id="expDesc${index}" rows="2">${escapeHtml(exp.description)}</textarea>
                            </div>
                        </div>
                    `;
                });
            }
        }

        function addExperience() {
            experience.push({
                company: 'New Company',
                position: 'New Position',
                date: 'Month Year - Present',
                description: 'Description...'
            });
            loadExperience();
        }

        function deleteExperience(index) {
            experience.splice(index, 1);
            loadExperience();
        }

        function saveExperience() {
            for (let i = 0; i < experience.length; i++) {
                const company = document.getElementById(`expCompany${i}`);
                const position = document.getElementById(`expPosition${i}`);
                const date = document.getElementById(`expDate${i}`);
                const desc = document.getElementById(`expDesc${i}`);
                
                if (company) experience[i].company = company.value;
                if (position) experience[i].position = position.value;
                if (date) experience[i].date = date.value;
                if (desc) experience[i].description = desc.value;
            }
            
            localStorage.setItem('experience', JSON.stringify(experience));
            loadExperience();
            showAlert('Experience saved', 'success');
        }

        // Projects management
        let projects = JSON.parse(localStorage.getItem('projects')) || [
            {
                title: 'Hardware Store Inventory System',
                date: 'Sep 2025 - Oct 2025',
                description: 'Built a complete inventory system with product browsing, cart management, and sales tracking.',
                skills: ['Python', 'OOP', 'Database']
            },
            {
                title: 'Intelligent Home Control',
                date: 'Sep 2025 - Oct 2025',
                description: 'Raspberry Pi based home automation with sensors and cloud logging.',
                skills: ['Python', 'Raspberry Pi', 'IoT']
            }
        ];

        function loadProjects() {
            const grid = document.getElementById('projectsGrid');
            grid.innerHTML = '';

            projects.forEach(project => {
                grid.innerHTML += `
                    <div class="project-card">
                        <div class="project-image">
                            <i class="fas fa-laptop-code"></i>
                        </div>
                        <div class="project-content">
                            <h3 class="project-title">${escapeHtml(project.title)}</h3>
                            <p style="color: var(--gray); font-size: 0.9rem; margin-bottom: 0.5rem;">${escapeHtml(project.date)}</p>
                            <p style="font-size: 0.95rem;">${escapeHtml(project.description)}</p>
                            <div class="project-skills">
                                ${project.skills.map(s => `<span class="skill-tag">${escapeHtml(s)}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                `;
            });

            if (state.isLoggedIn) {
                const list = document.getElementById('projectsList');
                list.innerHTML = '';

                projects.forEach((project, index) => {
                    list.innerHTML += `
                        <div style="background: var(--light); padding: 1rem; margin-bottom: 1rem; border-radius: var(--radius);">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <strong>Project ${index + 1}</strong>
                                <button class="btn btn-danger btn-sm" onclick="deleteProject(${index})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Project Title" value="${escapeHtml(project.title)}" id="projTitle${index}">
                            </div>
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Date" value="${escapeHtml(project.date)}" id="projDate${index}">
                            </div>
                            <div class="form-group">
                                <textarea class="form-control" placeholder="Description" id="projDesc${index}" rows="2">${escapeHtml(project.description)}</textarea>
                            </div>
                            <div class="form-group">
                                <label>Skills (comma separated)</label>
                                <input type="text" class="form-control" placeholder="Python, JavaScript, etc." value="${project.skills.join(', ')}" id="projSkills${index}">
                            </div>
                        </div>
                    `;
                });
            }
        }

        function addProject() {
            projects.push({
                title: 'New Project',
                date: 'Month Year - Month Year',
                description: 'Project description...',
                skills: []
            });
            loadProjects();
        }

        function deleteProject(index) {
            projects.splice(index, 1);
            loadProjects();
        }

        function saveProjects() {
            for (let i = 0; i < projects.length; i++) {
                const title = document.getElementById(`projTitle${i}`);
                const date = document.getElementById(`projDate${i}`);
                const desc = document.getElementById(`projDesc${i}`);
                const skills = document.getElementById(`projSkills${i}`);
                
                if (title) projects[i].title = title.value;
                if (date) projects[i].date = date.value;
                if (desc) projects[i].description = desc.value;
                if (skills) {
                    projects[i].skills = skills.value.split(',').map(s => s.trim()).filter(s => s);
                }
            }
            
            localStorage.setItem('projects', JSON.stringify(projects));
            loadProjects();
            showAlert('Projects saved', 'success');
        }

        // Social links
        function saveSocialLinks() {
            const links = {
                linkedin: document.getElementById('editLinkedin').value,
                github: document.getElementById('editGithub').value,
                twitter: document.getElementById('editTwitter').value
            };
            
            localStorage.setItem('socialLinks', JSON.stringify(links));
            updateSocialLinks(links);
            showAlert('Social links saved', 'success');
        }

        function updateSocialLinks(links) {
            const html = (platform, url) => {
                return url ? `<a href="${url}" class="social-link" target="_blank"><i class="fab fa-${platform}"></i></a>` : '';
            };

            const linksHtml = html('linkedin', links.linkedin) + 
                            html('github', links.github) + 
                            html('twitter', links.twitter);

            document.getElementById('heroSocialLinks').innerHTML = linksHtml;
            document.getElementById('contactSocialLinks').innerHTML = linksHtml;
            document.getElementById('footerSocialLinks').innerHTML = linksHtml;
        }

        // Auth functions
        function toggleAdmin() {
            if (state.isLoggedIn) {
                document.getElementById('adminPanel').classList.toggle('active');
                if (document.getElementById('adminPanel').classList.contains('active')) {
                    updateVisitorStats();
                    loadEducation();
                    loadExperience();
                    loadProjects();
                }
            } else {
                document.getElementById('authModal').classList.add('active');
                document.getElementById('passwordForm').style.display = 'block';
                document.getElementById('verificationSection').style.display = 'none';
                document.getElementById('loginPassword').focus();
            }
        }

        function closeAdmin() {
            document.getElementById('adminPanel').classList.remove('active');
        }

        function verifyPassword() {
            const pwd = document.getElementById('loginPassword').value;
            
            if (state.attempts >= state.maxAttempts) {
                showAlert('Too many attempts. Try later.', 'danger');
                return;
            }

            if (pwd !== CONFIG.password) {
                state.attempts++;
                showAlert(`Wrong password. ${state.maxAttempts - state.attempts} attempts left`, 'danger');
                return;
            }

            // Generate verification code
            state.verificationCode = Math.floor(100000 + Math.random() * 900000).toString();
            state.codeExpiry = Date.now() + CONFIG.codeExpiry;
            
            showAlert(`Code: ${state.verificationCode}`, 'info');
            
            document.getElementById('passwordForm').style.display = 'none';
            document.getElementById('verificationSection').style.display = 'block';
            document.querySelectorAll('.code-input')[0].focus();
        }

        function resendCode() {
            state.verificationCode = Math.floor(100000 + Math.random() * 900000).toString();
            state.codeExpiry = Date.now() + CONFIG.codeExpiry;
            showAlert(`New code: ${state.verificationCode}`, 'info');
        }

        function moveToNext(input, index) {
            input.value = input.value.replace(/[^0-9]/g, '');
            if (input.value && index < 5) {
                document.querySelectorAll('.code-input')[index + 1].focus();
            }
        }

        function handleCodeKey(event, input, index) {
            if (event.key === 'Backspace' && !input.value && index > 0) {
                document.querySelectorAll('.code-input')[index - 1].focus();
            }
        }

        function verifyCode() {
            let code = '';
            document.querySelectorAll('.code-input').forEach(i => code += i.value);

            if (code.length !== 6) {
                showAlert('Enter complete code', 'warning');
                return;
            }

            if (Date.now() > state.codeExpiry) {
                showAlert('Code expired', 'danger');
                return;
            }

            if (code === state.verificationCode) {
                state.isLoggedIn = true;
                state.sessionStart = Date.now();
                
                document.getElementById('authModal').classList.remove('active');
                document.getElementById('adminBtn').classList.add('active');
                document.getElementById('adminPanel').classList.add('active');
                
                // Load admin data
                updateVisitorStats();
                loadEducation();
                loadExperience();
                loadProjects();
                
                // Start session timer
                startSessionTimer();
                
                showAlert('Login successful', 'success');
            } else {
                showAlert('Invalid code', 'danger');
            }
        }

        function logout() {
            state.isLoggedIn = false;
            state.sessionStart = null;
            document.getElementById('adminBtn').classList.remove('active');
            document.getElementById('adminPanel').classList.remove('active');
            document.getElementById('sessionTimer').style.display = 'none';
            showAlert('Logged out', 'success');
        }

        function startSessionTimer() {
            const timerDiv = document.createElement('div');
            timerDiv.id = 'sessionTimer';
            timerDiv.style.cssText = `
                position: fixed;
                top: 80px;
                right: 80px;
                background: var(--success);
                color: white;
                padding: 0.5rem 1rem;
                border-radius: 20px;
                font-size: 0.9rem;
                z-index: 998;
                box-shadow: var(--shadow);
            `;
            document.body.appendChild(timerDiv);

            const update = () => {
                if (!state.isLoggedIn) {
                    timerDiv.style.display = 'none';
                    return;
                }

                const elapsed = Date.now() - state.sessionStart;
                const remaining = CONFIG.sessionDuration - elapsed;

                if (remaining <= 0) {
                    logout();
                    showAlert('Session expired', 'warning');
                    return;
                }

                const mins = Math.floor(remaining / 60000);
                const secs = Math.floor((remaining % 60000) / 1000);
                timerDiv.textContent = `â±ï¸ ${mins}:${secs.toString().padStart(2, '0')}`;
                timerDiv.style.display = 'block';

                setTimeout(update, 1000);
            };

            update();
        }

        // Contact form
        document.getElementById('contactForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('contactName').value;
            const email = document.getElementById('contactEmail').value;
            const message = document.getElementById('contactMessage').value;

            // Open in email client
            window.location.href = `mailto:sapkotaaashis62@gmail.com?subject=Message from ${encodeURIComponent(name)}&body=${encodeURIComponent(message + '\n\nFrom: ' + email)}`;
            
            showAlert('Message sent!', 'success');
            this.reset();
        });

        // Mobile menu
        function toggleMobileMenu() {
            const menu = document.getElementById('mobileNav');
            menu.style.display = menu.style.display === 'none' ? 'block' : 'none';
        }

        // Utility functions
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function showAlert(msg, type) {
            const alert = document.getElementById('alert');
            alert.textContent = msg;
            alert.className = `alert ${type}`;
            alert.style.display = 'block';
            
            setTimeout(() => {
                alert.style.display = 'none';
            }, 3000);
        }

        // Load saved data
        function loadSavedData() {
            // Personal info
            const name = localStorage.getItem('userName');
            const title = localStorage.getItem('userTitle');
            const email = localStorage.getItem('userEmail');
            const about = localStorage.getItem('userAbout');
            
            if (name) {
                document.getElementById('navName').textContent = name;
                document.getElementById('heroName').textContent = name;
                document.getElementById('footerName').textContent = name;
                document.getElementById('editName').value = name;
            }
            
            if (title) {
                document.getElementById('heroTitle').textContent = title;
                document.getElementById('aboutSubtitle').textContent = title;
                document.getElementById('editTitle').value = title;
            }
            
            if (email) {
                document.getElementById('footerEmail').textContent = email;
                document.getElementById('footerEmail').href = 'mailto:' + email;
                document.getElementById('editEmail').value = email;
            }
            
            if (about) {
                const aboutHtml = about.split('\n').map(p => `<p>${p}</p>`).join('');
                document.getElementById('aboutText').innerHTML = aboutHtml;
                document.getElementById('editAbout').value = about;
            }

            // Profile photo
            const profilePhoto = localStorage.getItem('profilePhoto');
            if (profilePhoto) {
                document.getElementById('profileImage').src = profilePhoto;
                document.getElementById('profileImage').style.display = 'block';
                document.getElementById('profileInitial').style.display = 'none';
                document.getElementById('mainPhotoPreview').innerHTML = `<img src="${profilePhoto}">`;
            }

            // Social links
            const links = JSON.parse(localStorage.getItem('socialLinks') || '{}');
            document.getElementById('editLinkedin').value = links.linkedin || '';
            document.getElementById('editGithub').value = links.github || '';
            document.getElementById('editTwitter').value = links.twitter || '';
            updateSocialLinks(links);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            initTracking();
            loadSavedData();
            loadEducation();
            loadExperience();
            loadProjects();

            // Close modals on outside click
            document.getElementById('authModal').addEventListener('click', function(e) {
                if (e.target === this) this.classList.remove('active');
            });

            // Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    document.getElementById('authModal').classList.remove('active');
                    document.getElementById('adminPanel').classList.remove('active');
                }
            });

            // Update visitor stats periodically if logged in
            setInterval(() => {
                if (state.isLoggedIn) {
                    updateVisitorStats();
                }
            }, 10000);
        });
    </script>
</body>
</html>

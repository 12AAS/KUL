<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Aashis Sapkota | IT & Cybersecurity Student</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* ===== VARIABLES ===== */
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --primary-light: #3b82f6;
            --primary-soft: #e6f0ff;
            --secondary: #0f172a;
            --accent: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --dark: #0f172a;
            --gray: #64748b;
            --gray-light: #94a3b8;
            --gray-soft: #e2e8f0;
            --light: #f8fafc;
            --white: #ffffff;
            
            --gradient-primary: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
            --gradient-dark: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1);
            
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-2xl: 1.5rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            scroll-padding-top: 80px;
        }

        body {
            font-family: 'Inter', sans-serif;
            color: var(--dark);
            background: var(--light);
            line-height: 1.7;
            overflow-x: hidden;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0 1.5rem;
        }

        section {
            padding: 80px 0;
        }

        @media (max-width: 768px) {
            section {
                padding: 60px 0;
            }
            .container {
                padding: 0 1rem;
            }
        }

        /* ===== WELCOME ANIMATION ===== */
        .welcome-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--gradient-dark);
            z-index: 99999;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: welcomeFade 3s ease-in-out forwards;
            pointer-events: none;
        }

        @keyframes welcomeFade {
            0% { opacity: 1; visibility: visible; }
            70% { opacity: 1; visibility: visible; }
            100% { opacity: 0; visibility: hidden; }
        }

        .welcome-content {
            text-align: center;
            color: white;
            animation: welcomeScale 2.5s ease-in-out;
            padding: 0 1rem;
        }

        @keyframes welcomeScale {
            0% { transform: scale(0.5); opacity: 0; }
            20% { transform: scale(1.1); opacity: 1; }
            40% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1); opacity: 0; }
        }

        .welcome-content h1 {
            font-size: clamp(2rem, 8vw, 4rem);
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #fff 0%, var(--accent) 100%);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .welcome-content p {
            font-size: clamp(1rem, 4vw, 1.5rem);
        }

        /* ===== ADMIN BUTTON ===== */
        #adminButton {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: var(--shadow-xl);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
        }

        @media (max-width: 768px) {
            #adminButton {
                width: 45px;
                height: 45px;
                font-size: 1rem;
                top: 15px;
                right: 15px;
            }
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.4); }
            70% { box-shadow: 0 0 0 15px rgba(37, 99, 235, 0); }
            100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0); }
        }

        #adminButton:hover {
            background: var(--primary);
            color: white;
            transform: scale(1.1);
        }

        #adminButton.logged-in {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        /* ===== AUTH MODAL ===== */
        #authModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(15, 23, 42, 0.95);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10001;
            backdrop-filter: blur(10px);
            padding: 1rem;
        }

        #authModal.active {
            display: flex;
        }

        .auth-box {
            background: white;
            padding: 2rem;
            border-radius: var(--radius-2xl);
            width: 100%;
            max-width: 400px;
            box-shadow: var(--shadow-xl);
        }

        @media (max-width: 480px) {
            .auth-box {
                padding: 1.5rem;
            }
        }

        .auth-input {
            width: 100%;
            padding: 1rem 1.2rem;
            margin: 1rem 0;
            border: 2px solid #e2e8f0;
            border-radius: var(--radius-lg);
            font-size: 1rem;
        }

        .auth-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .auth-btn {
            width: 100%;
            padding: 1rem;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: var(--radius-lg);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
        }

        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        /* ===== VERIFICATION CODE ===== */
        .verification-section {
            display: none;
        }

        .verification-section.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .verification-code {
            display: flex;
            gap: 0.5rem;
            margin: 2rem 0;
            justify-content: center;
            flex-wrap: wrap;
        }

        .code-input {
            width: 45px;
            height: 55px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            border: 2px solid #e2e8f0;
            border-radius: var(--radius-lg);
        }

        @media (max-width: 480px) {
            .code-input {
                width: 40px;
                height: 50px;
                font-size: 1.2rem;
            }
        }

        .code-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .code-input.filled {
            border-color: var(--primary);
        }

        /* ===== SECURITY ALERTS ===== */
        .security-alert {
            position: fixed;
            top: 80px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: var(--radius-lg);
            font-weight: 600;
            background: white;
            box-shadow: var(--shadow-xl);
            display: none;
            z-index: 9999;
            border-left: 4px solid;
            max-width: 300px;
        }

        @media (max-width: 768px) {
            .security-alert {
                top: 70px;
                right: 15px;
                left: 15px;
                max-width: none;
                font-size: 0.9rem;
            }
        }

        .security-alert.success { border-left-color: var(--success); color: var(--success); }
        .security-alert.danger { border-left-color: var(--danger); color: var(--danger); }

        .session-timer {
            position: fixed;
            top: 80px;
            right: 20px;
            background: white;
            color: var(--success);
            padding: 0.75rem 1.25rem;
            border-radius: 30px;
            border-left: 4px solid var(--success);
            box-shadow: var(--shadow-xl);
            display: none;
            z-index: 9999;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .session-timer {
                top: 70px;
                right: 15px;
                font-size: 0.85rem;
                padding: 0.5rem 1rem;
            }
        }

        /* ===== ADMIN PANEL ===== */
        #adminPanel {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 600px;
            height: 100vh;
            background: white;
            box-shadow: var(--shadow-xl);
            z-index: 10002;
            transition: right 0.4s ease;
            padding: 1.5rem;
            overflow-y: auto;
            border-left: 1px solid #e2e8f0;
        }

        @media (max-width: 480px) {
            #adminPanel {
                max-width: 100%;
                padding: 1rem;
            }
        }

        #adminPanel.active {
            right: 0;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--primary-soft);
        }

        .admin-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: var(--light);
            border-radius: var(--radius-xl);
            border: 1px solid var(--gray-soft);
        }

        @media (max-width: 480px) {
            .admin-section {
                padding: 1rem;
            }
        }

        .admin-section h3 {
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.2rem;
            color: var(--primary);
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.3rem;
            font-weight: 600;
            color: var(--gray);
        }

        .form-control {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid #e2e8f0;
            border-radius: var(--radius-md);
            font-size: 0.95rem;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }

        textarea.form-control {
            min-height: 100px;
            resize: vertical;
        }

        .btn {
            padding: 0.8rem 1.2rem;
            border-radius: var(--radius-md);
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            justify-content: center;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-block {
            width: 100%;
        }

        .btn-sm {
            padding: 0.5rem 0.8rem;
            font-size: 0.8rem;
        }

        .upload-area {
            border: 2px dashed #e2e8f0;
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            text-align: center;
            margin: 1rem 0;
            cursor: pointer;
            transition: 0.3s;
        }

        .upload-area:hover {
            border-color: var(--primary);
            background: var(--primary-soft);
        }

        .upload-area i {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .image-preview {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 0.5rem;
            margin-top: 1rem;
        }

        .image-preview img {
            width: 100%;
            height: 80px;
            object-fit: cover;
            border-radius: var(--radius-md);
            border: 2px solid #e2e8f0;
        }

        /* Edit Items */
        .edit-item {
            background: white;
            padding: 1rem;
            border-radius: var(--radius-lg);
            margin-bottom: 1rem;
            border: 1px solid var(--gray-soft);
        }

        .edit-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        /* Visitor Stats - Advanced */
        .visitor-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.8rem;
            margin-bottom: 1.5rem;
        }

        .stat-card {
            background: white;
            padding: 1rem;
            border-radius: var(--radius-lg);
            text-align: center;
            border: 1px solid var(--gray-soft);
            transition: 0.3s;
        }

        .stat-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--gray);
        }

        .device-badge {
            display: inline-block;
            padding: 0.2rem 0.5rem;
            border-radius: 30px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .device-apple { background: #333; color: white; }
        .device-android { background: #3ddc84; color: black; }
        .device-windows { background: #00adef; color: white; }
        .device-linux { background: #fcc624; color: black; }
        .device-mac { background: #555; color: white; }

        .visitor-table {
            width: 100%;
            overflow-x: auto;
            display: block;
            border-radius: var(--radius-lg);
            border: 1px solid var(--gray-soft);
        }

        .visitor-table table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
            min-width: 1000px;
        }

        .visitor-table th {
            background: var(--gradient-primary);
            color: white;
            font-weight: 600;
            padding: 0.8rem;
            text-align: left;
        }

        .visitor-table td {
            padding: 0.8rem;
            border-bottom: 1px solid var(--gray-soft);
        }

        .visitor-table tr:hover {
            background: var(--primary-soft);
        }

        .click-tracker {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--gray-soft);
            border-radius: var(--radius-lg);
        }

        .click-item {
            padding: 0.8rem;
            border-bottom: 1px solid var(--gray-soft);
            transition: 0.3s;
        }

        .click-item:hover {
            background: var(--primary-soft);
        }

        .click-item:last-child {
            border-bottom: none;
        }

        .click-time {
            color: var(--gray);
            font-size: 0.75rem;
            margin-top: 0.2rem;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        /* ===== NAVIGATION ===== */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            border-bottom: 1px solid #e2e8f0;
        }

        .nav-container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 0.8rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        @media (max-width: 768px) {
            .nav-container {
                padding: 0.8rem 1rem;
            }
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--gradient-primary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1rem;
        }

        .logo-text {
            font-weight: 700;
            font-size: 1.2rem;
            background: var(--gradient-primary);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        @media (max-width: 768px) {
            .logo-text {
                font-size: 1rem;
            }
        }

        .nav-links {
            display: flex;
            gap: 1.5rem;
            list-style: none;
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
        }

        .nav-link {
            text-decoration: none;
            color: var(--dark);
            font-weight: 600;
            transition: 0.3s;
            font-size: 0.95rem;
        }

        .nav-link:hover {
            color: var(--primary);
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--dark);
            cursor: pointer;
        }

        @media (max-width: 768px) {
            .mobile-menu-btn {
                display: block;
            }
        }

        .mobile-nav {
            display: none;
            position: fixed;
            top: 60px;
            left: 0;
            width: 100%;
            background: white;
            padding: 1rem;
            box-shadow: var(--shadow-lg);
            z-index: 999;
            flex-direction: column;
            gap: 1rem;
        }

        .mobile-nav.active {
            display: flex;
        }

        .mobile-nav a {
            padding: 0.8rem;
            text-decoration: none;
            color: var(--dark);
            font-weight: 600;
            border-bottom: 1px solid #e2e8f0;
        }

        /* ===== HERO SECTION ===== */
        .hero {
            padding: 120px 0 60px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            position: relative;
            overflow: hidden;
        }

        @media (max-width: 768px) {
            .hero {
                padding: 100px 0 40px;
            }
        }

        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 80%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .hero-content {
            position: relative;
            z-index: 2;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: center;
        }

        @media (max-width: 768px) {
            .hero-content {
                grid-template-columns: 1fr;
                gap: 2rem;
                text-align: center;
            }
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            padding: 0.5rem 1rem;
            border-radius: 50px;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
        }

        .hero-title {
            font-size: clamp(2rem, 5vw, 4rem);
            font-weight: 800;
            margin-bottom: 1rem;
        }

        .hero-title span {
            color: var(--accent);
        }

        .hero-subtitle {
            font-size: clamp(1.2rem, 3vw, 1.5rem);
            margin-bottom: 1rem;
            opacity: 0.9;
        }

        .profile-image-container {
            width: 100%;
            max-width: 350px;
            height: 350px;
            border-radius: 50%;
            overflow: hidden;
            box-shadow: var(--shadow-xl);
            border: 4px solid white;
            animation: float 6s ease-in-out infinite;
            margin: 0 auto;
        }

        @media (max-width: 768px) {
            .profile-image-container {
                max-width: 280px;
                height: 280px;
            }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .profile-image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* ===== SECTION TITLES ===== */
        .section-title {
            text-align: center;
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            margin-bottom: 1rem;
            position: relative;
            display: inline-block;
            left: 50%;
            transform: translateX(-50%);
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--gradient-primary);
        }

        .section-subtitle {
            text-align: center;
            color: var(--gray);
            margin-bottom: 2rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            font-size: 1rem;
        }

        /* ===== TIMELINE ===== */
        .timeline {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 4px;
            background: var(--gradient-primary);
        }

        @media (max-width: 768px) {
            .timeline::before {
                left: 15px;
            }
        }

        .timeline-item {
            background: white;
            padding: 1.5rem;
            border-radius: var(--radius-lg);
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow-lg);
            border: 1px solid #e2e8f0;
            position: relative;
            margin-left: 50px;
        }

        @media (max-width: 768px) {
            .timeline-item {
                margin-left: 40px;
                padding: 1rem;
            }
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -44px;
            top: 25px;
            width: 16px;
            height: 16px;
            background: white;
            border: 3px solid var(--primary);
            border-radius: 50%;
        }

        @media (max-width: 768px) {
            .timeline-item::before {
                left: -36px;
                width: 14px;
                height: 14px;
            }
        }

        .timeline-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .timeline-title {
            font-size: 1.2rem;
            color: var(--dark);
            font-weight: 700;
        }

        .timeline-date {
            color: var(--primary);
            font-weight: 600;
            background: var(--primary-soft);
            padding: 0.4rem 0.8rem;
            border-radius: 30px;
            font-size: 0.85rem;
        }

        /* ===== PROJECTS ===== */
        .projects {
            background: var(--light);
        }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }

        @media (max-width: 480px) {
            .projects-grid {
                grid-template-columns: 1fr;
            }
        }

        .project-card {
            background: white;
            border-radius: var(--radius-xl);
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            transition: 0.3s;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl);
        }

        .project-images {
            height: 180px;
            overflow: hidden;
            background: var(--primary-soft);
        }

        .project-images img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: 0.5s;
        }

        .project-card:hover .project-images img {
            transform: scale(1.1);
        }

        .project-content {
            padding: 1.5rem;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .project-title {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            color: var(--dark);
            font-weight: 700;
        }

        .project-date {
            color: var(--primary);
            font-weight: 600;
            background: var(--primary-soft);
            padding: 0.3rem 0.8rem;
            border-radius: 30px;
            display: inline-block;
            margin-bottom: 0.8rem;
            font-size: 0.85rem;
        }

        .project-description {
            color: var(--dark);
            margin-bottom: 1rem;
            line-height: 1.6;
            flex: 1;
            font-size: 0.95rem;
        }

        .project-skills {
            display: flex;
            flex-wrap: wrap;
            gap: 0.3rem;
            margin-top: auto;
        }

        .skill-tag {
            background: var(--primary-soft);
            color: var(--primary);
            padding: 0.3rem 0.8rem;
            border-radius: 30px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        /* ===== CONTACT FORM ===== */
        .contact {
            background: var(--gradient-dark);
            color: white;
        }

        .contact .section-title {
            color: white;
        }

        .contact-form {
            max-width: 600px;
            margin: 2rem auto 0;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: var(--radius-2xl);
        }

        @media (max-width: 480px) {
            .contact-form {
                padding: 1.5rem;
            }
        }

        .form-group {
            margin-bottom: 1.2rem;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.8rem 1rem;
            background: rgba(255,255,255,0.15);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: var(--radius-lg);
            color: white;
            font-size: 1rem;
        }

        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: rgba(255,255,255,0.7);
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--accent);
            background: rgba(255,255,255,0.2);
        }

        .submit-btn {
            width: 100%;
            padding: 1rem;
            background: var(--gradient-primary);
            color: white;
            border: none;
            border-radius: var(--radius-lg);
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }

        .social-link {
            width: 45px;
            height: 45px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-decoration: none;
            font-size: 1.1rem;
            transition: 0.3s;
        }

        .social-link:hover {
            background: var(--primary);
            transform: translateY(-5px);
        }

        .contact-email {
            text-align: center;
            margin-top: 1.5rem;
            font-size: 0.95rem;
            word-break: break-all;
        }

        .contact-email a {
            color: white;
            text-decoration: none;
            border-bottom: 2px solid var(--accent);
        }

        footer {
            background: var(--dark);
            color: white;
            padding: 3rem 0 1.5rem;
            text-align: center;
        }

        .footer-logo {
            font-size: 1.8rem;
            font-weight: 800;
            background: var(--gradient-primary);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .footer-text {
            color: var(--gray);
            margin-bottom: 1.5rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            font-size: 0.95rem;
            padding: 0 1rem;
        }

        .copyright {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: var(--gray);
            font-size: 0.9rem;
        }

        .admin-only {
            display: none;
        }

        .admin-only.visible {
            display: block;
        }

        .admin-only-inline {
            display: none;
        }

        .admin-only-inline.visible {
            display: inline-block;
        }
    </style>
</head>
<body>
    <!-- WELCOME ANIMATION -->
    <div class="welcome-overlay">
        <div class="welcome-content">
            <h1>Welcome to My Portfolio</h1>
            <p>Aashis Sapkota - IT & Cybersecurity Student</p>
        </div>
    </div>

    <!-- ADMIN BUTTON -->
    <button id="adminButton" onclick="toggleAdmin()">
        <i class="fas fa-user-shield"></i>
    </button>

    <!-- SECURITY ALERT -->
    <div class="security-alert" id="securityAlert"></div>
    <div class="session-timer" id="sessionTimer"></div>

    <!-- AUTH MODAL -->
    <div id="authModal">
        <div class="auth-box">
            <h3 style="text-align: center; margin-bottom: 1.5rem;">Admin Login</h3>
            <div id="passwordForm">
                <p style="text-align: center; color: var(--gray); font-size: 0.9rem;">sapkotaaashis62@gmail.com</p>
                <input type="password" id="loginPassword" class="auth-input" placeholder="Enter password">
                <button class="auth-btn" onclick="verifyPassword()">Send Code</button>
            </div>
            <div class="verification-section" id="verificationSection">
                <div class="verification-code">
                    <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 1)" onkeyup="handleCodeKey(event, this, 1)">
                    <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 2)" onkeyup="handleCodeKey(event, this, 2)">
                    <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 3)" onkeyup="handleCodeKey(event, this, 3)">
                    <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 4)" onkeyup="handleCodeKey(event, this, 4)">
                    <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 5)" onkeyup="handleCodeKey(event, this, 5)">
                    <input type="text" maxlength="1" class="code-input" oninput="moveToNext(this, 6)" onkeyup="handleCodeKey(event, this, 6)">
                </div>
                <button class="auth-btn" onclick="verifyCode()">Verify</button>
                <p style="text-align: center; margin-top: 1rem;"><a href="#" onclick="resendCode()">Resend Code</a></p>
            </div>
        </div>
    </div>

    <!-- ADMIN PANEL -->
    <div id="adminPanel">
        <div class="admin-header">
            <h3><i class="fas fa-user-shield"></i> Admin Panel</h3>
            <button onclick="closeAdmin()" style="background: none; border: none; font-size: 2rem; cursor: pointer;">Ã—</button>
        </div>
        
        <!-- VISITOR STATISTICS SECTION - ADVANCED -->
        <div class="admin-section">
            <h3><i class="fas fa-chart-bar"></i> Advanced Visitor Tracking</h3>
            
            <div class="visitor-stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalVisitors">0</div>
                    <div class="stat-label">Total Visits</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="uniqueVisitors">0</div>
                    <div class="stat-label">Unique</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="todayVisitors">0</div>
                    <div class="stat-label">Today</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activeNow">0</div>
                    <div class="stat-label">Active Now</div>
                </div>
            </div>

            <div class="visitor-stats">
                <div class="stat-card">
                    <div class="stat-number" id="appleDevices">0</div>
                    <div class="stat-label">Apple</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="androidDevices">0</div>
                    <div class="stat-label">Android</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="windowsDevices">0</div>
                    <div class="stat-label">Windows</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="otherDevices">0</div>
                    <div class="stat-label">Other</div>
                </div>
            </div>
            
            <h4 style="margin: 1rem 0;">Detailed Visitor Information</h4>
            <div class="visitor-table">
                <table id="visitorTable">
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>IP Address</th>
                            <th>Location</th>
                            <th>Device Model</th>
                            <th>OS & Version</th>
                            <th>Browser</th>
                            <th>Screen</th>
                            <th>Language</th>
                            <th>Page</th>
                        </tr>
                    </thead>
                    <tbody id="visitorTableBody"></tbody>
                </table>
            </div>
            
            <h4 style="margin: 1rem 0 0.5rem;">Click Tracking</h4>
            <div class="click-tracker" id="clickTracker"></div>
            
            <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                <button class="btn btn-primary btn-sm" onclick="exportVisitorData()" style="flex:1;">
                    <i class="fas fa-download"></i> Export CSV
                </button>
                <button class="btn btn-danger btn-sm" onclick="clearVisitorData()" style="flex:1;">
                    <i class="fas fa-trash"></i> Clear Data
                </button>
            </div>
        </div>
        
        <!-- PROFILE PHOTO SECTION -->
        <div class="admin-section admin-only">
            <h3><i class="fas fa-camera"></i> Profile Photo</h3>
            <div class="upload-area" onclick="document.getElementById('photoUpload').click()">
                <i class="fas fa-cloud-upload-alt"></i>
                <p>Click to upload photo</p>
                <small style="color: var(--gray);">Photo will be visible to everyone</small>
            </div>
            <input type="file" id="photoUpload" accept="image/*" style="display: none;" onchange="previewPhoto(this)">
            <div class="image-preview" id="photoPreview"></div>
            <button class="btn btn-success admin-only-inline" onclick="savePhoto()" style="width:100%; margin-top:1rem;">
                <i class="fas fa-save"></i> Save Photo (Visible to Everyone)
            </button>
        </div>

        <!-- PERSONAL INFO SECTION -->
        <div class="admin-section admin-only">
            <h3><i class="fas fa-user"></i> Personal Info</h3>
            <div class="form-group">
                <label>Your Name</label>
                <input type="text" id="adminName" class="form-control" value="Aashis Sapkota">
            </div>
            <div class="form-group">
                <label>Your Title</label>
                <input type="text" id="adminTitle" class="form-control" value="IT & Cybersecurity Student">
            </div>
            <div class="form-group">
                <label>Your Email</label>
                <input type="email" id="adminEmail" class="form-control" value="sapkotaaashis62@gmail.com">
            </div>
            <button class="btn btn-success" onclick="savePersonalInfo()" style="width:100%;">
                <i class="fas fa-save"></i> Save Personal Info
            </button>
        </div>

        <!-- ABOUT ME SECTION -->
        <div class="admin-section admin-only">
            <h3><i class="fas fa-address-card"></i> About Me</h3>
            <textarea id="adminAbout" class="form-control" rows="8">Hi! I'm beginning my journey in IT, with a strong interest in tech support, cybersecurity, and networking. I've completed a Diploma and Advanced Diploma in IT, and I'm now studying for my Bachelor of Information Technology.

I'm learning to troubleshoot technical issues, assist users with IT problems, and understand how systems work. I've started exploring Python, Power BI, and Tableau, and I'm excited to keep growing my knowledge.

I enjoy helping people and solving problems, and I'm looking forward to gaining hands-on experience in IT support roles like Help Desk or Level 1 Technician.</textarea>
            <button class="btn btn-success" onclick="saveAbout()" style="width:100%; margin-top:1rem;">
                <i class="fas fa-save"></i> Save About Me
            </button>
        </div>

        <!-- EDUCATION MANAGEMENT SECTION -->
        <div class="admin-section admin-only">
            <h3><i class="fas fa-graduation-cap"></i> Education</h3>
            <div id="educationList"></div>
            <button class="btn btn-primary admin-only-inline" onclick="addEducation()" style="width:100%; margin-bottom:1rem;">
                <i class="fas fa-plus"></i> Add New Education
            </button>
            <button class="btn btn-success" onclick="saveAllEducation()" style="width:100%;">
                <i class="fas fa-save"></i> Save All Education
            </button>
        </div>

        <!-- EXPERIENCE MANAGEMENT SECTION -->
        <div class="admin-section admin-only">
            <h3><i class="fas fa-briefcase"></i> Experience</h3>
            <div id="experienceList"></div>
            <button class="btn btn-primary admin-only-inline" onclick="addExperience()" style="width:100%; margin-bottom:1rem;">
                <i class="fas fa-plus"></i> Add New Experience
            </button>
            <button class="btn btn-success" onclick="saveAllExperiences()" style="width:100%;">
                <i class="fas fa-save"></i> Save All Experiences
            </button>
        </div>

        <!-- PROJECTS MANAGEMENT SECTION -->
        <div class="admin-section admin-only">
            <h3><i class="fas fa-project-diagram"></i> Projects</h3>
            <div id="projectsList"></div>
            <button class="btn btn-primary admin-only-inline" onclick="addProject()" style="width:100%; margin-bottom:1rem;">
                <i class="fas fa-plus"></i> Add New Project
            </button>
            <button class="btn btn-success" onclick="saveAllProjects()" style="width:100%;">
                <i class="fas fa-save"></i> Save All Projects
            </button>
        </div>

        <!-- SOCIAL LINKS SECTION -->
        <div class="admin-section admin-only">
            <h3><i class="fas fa-share-alt"></i> Social Links</h3>
            <div class="form-group">
                <label>LinkedIn URL</label>
                <input type="url" id="linkedinUrl" class="form-control">
            </div>
            <div class="form-group">
                <label>GitHub URL</label>
                <input type="url" id="githubUrl" class="form-control">
            </div>
            <div class="form-group">
                <label>Twitter URL</label>
                <input type="url" id="twitterUrl" class="form-control">
            </div>
            <button class="btn btn-success" onclick="saveSocialLinks()" style="width:100%;">
                <i class="fas fa-save"></i> Save Social Links
            </button>
        </div>

        <!-- LOGOUT BUTTON -->
        <button class="btn btn-danger" onclick="logout()" style="width:100%;">
            <i class="fas fa-sign-out-alt"></i> Logout
        </button>
    </div>

    <!-- NAVIGATION -->
    <nav>
        <div class="nav-container">
            <a href="#" class="logo">
                <div class="logo-icon">AS</div>
                <span class="logo-text" id="navName">Aashis Sapkota</span>
            </a>
            <ul class="nav-links">
                <li><a href="#home" class="nav-link" onclick="trackClick('Home')">Home</a></li>
                <li><a href="#about" class="nav-link" onclick="trackClick('About')">About</a></li>
                <li><a href="#experience" class="nav-link" onclick="trackClick('Experience')">Experience</a></li>
                <li><a href="#education" class="nav-link" onclick="trackClick('Education')">Education</a></li>
                <li><a href="#projects" class="nav-link" onclick="trackClick('Projects')">Projects</a></li>
                <li><a href="#contact" class="nav-link" onclick="trackClick('Contact')">Contact</a></li>
            </ul>
            <button class="mobile-menu-btn" onclick="toggleMobileMenu()">
                <i class="fas fa-bars"></i>
            </button>
        </div>
        <div class="mobile-nav" id="mobileNav">
            <a href="#home" onclick="trackClick('Home'); toggleMobileMenu()">Home</a>
            <a href="#about" onclick="trackClick('About'); toggleMobileMenu()">About</a>
            <a href="#experience" onclick="trackClick('Experience'); toggleMobileMenu()">Experience</a>
            <a href="#education" onclick="trackClick('Education'); toggleMobileMenu()">Education</a>
            <a href="#projects" onclick="trackClick('Projects'); toggleMobileMenu()">Projects</a>
            <a href="#contact" onclick="trackClick('Contact'); toggleMobileMenu()">Contact</a>
        </div>
    </nav>

    <!-- HERO SECTION -->
    <section class="hero" id="home">
        <div class="container">
            <div class="hero-content">
                <div>
                    <div class="hero-badge">
                        <i class="fas fa-graduation-cap"></i>
                        <span id="heroBadge">IT & Cybersecurity Student</span>
                    </div>
                    <h1 class="hero-title"><span id="heroFirstName">Aashis</span> <span id="heroLastName">Sapkota</span></h1>
                    <h2 class="hero-subtitle" id="heroSubtitle">Building the Future of Tech Security</h2>
                    <p class="hero-description" id="heroDescription">Passionate about technology, cybersecurity, and solving real-world problems.</p>
                    <div class="social-links" id="heroSocialLinks"></div>
                </div>
                <div class="profile-image-container" id="profileImageContainer">
                    <img src="https://via.placeholder.com/400x400/2563eb/ffffff?text=AS" alt="Profile" id="profileImage">
                </div>
            </div>
        </div>
    </section>

    <!-- ABOUT SECTION - YOUR ORIGINAL TEXT -->
    <section class="about" id="about">
        <div class="container">
            <h2 class="section-title">About Me</h2>
            <p class="section-subtitle" id="aboutSubtitle">IT & Cybersecurity Student</p>
            <div class="about-text" id="aboutText" style="text-align: center; max-width:800px; margin:0 auto; padding: 0 1rem;">
                <p>Hi! I'm beginning my journey in IT, with a strong interest in tech support, cybersecurity, and networking. I've completed a Diploma and Advanced Diploma in IT, and I'm now studying for my Bachelor of Information Technology.</p>
                <p>I'm learning to troubleshoot technical issues, assist users with IT problems, and understand how systems work. I've started exploring Python, Power BI, and Tableau, and I'm excited to keep growing my knowledge.</p>
                <p>I enjoy helping people and solving problems, and I'm looking forward to gaining hands-on experience in IT support roles like Help Desk or Level 1 Technician.</p>
                <p style="margin-top:2rem; font-weight:700; color:var(--primary);"><i class="fas fa-handshake"></i> Open to learning and collaborating!</p>
            </div>
        </div>
    </section>

    <!-- EXPERIENCE SECTION - YOUR ORIGINAL EXPERIENCE -->
    <section class="experience" id="experience">
        <div class="container">
            <h2 class="section-title">Experience</h2>
            <p class="section-subtitle">My professional journey</p>
            <div class="timeline" id="experienceTimeline"></div>
        </div>
    </section>

    <!-- EDUCATION SECTION - YOUR ORIGINAL EDUCATION -->
    <section class="education" id="education">
        <div class="container">
            <h2 class="section-title">Education</h2>
            <p class="section-subtitle">My academic background</p>
            <div class="timeline" id="educationTimeline"></div>
        </div>
    </section>

    <!-- PROJECTS SECTION - YOUR ORIGINAL PROJECTS -->
    <section class="projects" id="projects">
        <div class="container">
            <h2 class="section-title">Projects</h2>
            <p class="section-subtitle">My recent work</p>
            <div class="projects-grid" id="projectsGrid"></div>
        </div>
    </section>

    <!-- CONTACT SECTION -->
    <section class="contact" id="contact">
        <div class="container">
            <h2 class="section-title">Let's Connect</h2>
            <p class="section-subtitle">Open to learning and collaborating!</p>
            <form class="contact-form" onsubmit="return sendEmail(event)">
                <div class="form-group">
                    <input type="text" id="name" placeholder="Your Name" required>
                </div>
                <div class="form-group">
                    <input type="email" id="email" placeholder="Your Email" required>
                </div>
                <div class="form-group">
                    <textarea id="message" rows="5" placeholder="Your Message" required></textarea>
                </div>
                <button type="submit" class="submit-btn">Send Message</button>
            </form>
            <div class="social-links" id="contactSocialLinks"></div>
            <p class="contact-email"><i class="fas fa-envelope"></i> <a href="mailto:sapkotaaashis62@gmail.com" id="contactEmail">sapkotaaashis62@gmail.com</a></p>
        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <div class="container">
            <div class="footer-logo" id="footerName">Aashis Sapkota</div>
            <p class="footer-text" id="footerText">IT & Cybersecurity Student | Learning by Doing</p>
            <div class="social-links" id="footerSocialLinks"></div>
            <div class="copyright"><p>&copy; 2026 Aashis Sapkota All Rights Reserved /div>
        </div>
    </footer>

    <script>
        // ===== CONFIGURATION =====
        const CONFIG = {
            email: "sapkotaaashis62@gmail.com",
            password: "Kusu@72!",
            maxAttempts: 3,
            sessionDuration: 30 * 60 * 1000,
            verificationCodeExpiry: 10 * 60 * 1000
        };

        // ===== STATE =====
        let state = {
            attempts: 0,
            isLockedOut: false,
            sessionStart: 0,
            verificationCode: '',
            codeExpiry: 0
        };

        let newPhotoData = null;

        // ===== YOUR ORIGINAL DATA - PRESERVED EXACTLY =====
        let experiences = JSON.parse(localStorage.getItem('experiences')) || [
            {
                title: "Personal Care Assistant",
                company: "Clayton Church Homes",
                location: "Australia",
                date: "Aug 2023 - Present",
                description: "Gained technical flexibility, problem-solving, and customer service abilities for IT support. Used accessible technology, clear communication, and documentation.",
                skills: ["Analytical Skills", "Communication", "Problem Solving"]
            }
        ];

        let educations = JSON.parse(localStorage.getItem('educations')) || [
            {
                title: "University of the Sunshine Coast",
                qualification: "Bachelor's degree, ICT",
                date: "Jul 2025 - Jul 2027",
                description: "Building foundations in programming, networking, databases, cybersecurity, and systems analysis.",
                skills: []
            },
            {
                title: "Southern Academy - SABT",
                qualification: "Diploma & Advanced Diploma in IT",
                date: "Nov 2022 - Apr 2025",
                description: "Completed Diploma and Advanced Diploma. Gained hands-on experience with Python, SQL, Power BI, and more.",
                skills: ["Python", "SQL", "Excel", "Power BI"]
            }
        ];

        let projects = JSON.parse(localStorage.getItem('projects')) || [
            {
                title: "Hardware Store Inventory System",
                date: "Sep 2025 - Oct 2025",
                description: "Built a complete inventory system with product browsing, cart management, and sales tracking.",
                skills: ["Python", "OOP", "Database"]
            },
            {
                title: "Intelligent Home Control",
                date: "Sep 2025 - Oct 2025",
                description: "Raspberry Pi based home automation with sensors and cloud logging.",
                skills: ["Python", "Raspberry Pi", "IoT"]
            }
        ];

        // ===== ADVANCED VISITOR TRACKING =====
        let visitors = JSON.parse(localStorage.getItem('visitors') || '[]');
        let clicks = JSON.parse(localStorage.getItem('clicks') || '[]');

        // Advanced device detection
        function getAdvancedDeviceInfo() {
            const ua = navigator.userAgent;
            const platform = navigator.platform;
            const vendor = navigator.vendor;
            
            let deviceInfo = {
                type: 'Unknown',
                model: 'Unknown',
                os: 'Unknown',
                osVersion: 'Unknown',
                browser: 'Unknown',
                browserVersion: 'Unknown'
            };

            // Detect iOS devices
            if (/iP(hone|od|ad)/.test(ua)) {
                deviceInfo.type = 'Mobile';
                deviceInfo.os = 'iOS';
                
                if (ua.includes('iPhone')) {
                    // Detect iPhone models
                    if (ua.includes('iPhone 16')) deviceInfo.model = 'iPhone 16';
                    else if (ua.includes('iPhone 15')) deviceInfo.model = 'iPhone 15';
                    else if (ua.includes('iPhone 14')) deviceInfo.model = 'iPhone 14';
                    else if (ua.includes('iPhone 13')) deviceInfo.model = 'iPhone 13';
                    else if (ua.includes('iPhone 12')) deviceInfo.model = 'iPhone 12';
                    else if (ua.includes('iPhone 11')) deviceInfo.model = 'iPhone 11';
                    else if (ua.includes('iPhone X')) deviceInfo.model = 'iPhone X';
                    else deviceInfo.model = 'iPhone';
                } else if (ua.includes('iPad')) {
                    deviceInfo.model = 'iPad';
                } else if (ua.includes('iPod')) {
                    deviceInfo.model = 'iPod';
                }
                
                // iOS version
                const iosVersion = ua.match(/OS (\d+)_/);
                if (iosVersion) deviceInfo.osVersion = iosVersion[1];
            }
            // Detect Android devices
            else if (/Android/.test(ua)) {
                deviceInfo.type = 'Mobile';
                deviceInfo.os = 'Android';
                
                // Android version
                const androidVersion = ua.match(/Android (\d+(\.\d+)?)/);
                if (androidVersion) deviceInfo.osVersion = androidVersion[1];
                
                // Device model
                const modelMatch = ua.match(/\(([^)]+)\)/);
                if (modelMatch) {
                    const modelStr = modelMatch[1];
                    if (modelStr.includes('Samsung')) deviceInfo.model = 'Samsung Galaxy';
                    else if (modelStr.includes('Pixel')) deviceInfo.model = 'Google Pixel';
                    else if (modelStr.includes('Xiaomi')) deviceInfo.model = 'Xiaomi';
                    else if (modelStr.includes('OnePlus')) deviceInfo.model = 'OnePlus';
                    else if (modelStr.includes('Huawei')) deviceInfo.model = 'Huawei';
                    else deviceInfo.model = modelStr.split(';')[0].trim();
                }
            }
            // Detect Windows
            else if (/Windows/.test(ua)) {
                deviceInfo.type = 'Desktop';
                deviceInfo.os = 'Windows';
                deviceInfo.model = 'Windows PC';
                
                const winVersion = ua.match(/Windows NT (\d+\.\d+)/);
                if (winVersion) {
                    const ver = winVersion[1];
                    if (ver === '10.0') deviceInfo.osVersion = '10/11';
                    else if (ver === '6.3') deviceInfo.osVersion = '8.1';
                    else if (ver === '6.2') deviceInfo.osVersion = '8';
                    else if (ver === '6.1') deviceInfo.osVersion = '7';
                }
            }
            // Detect Mac
            else if (/Mac OS X/.test(ua)) {
                deviceInfo.type = 'Desktop';
                deviceInfo.os = 'macOS';
                deviceInfo.model = 'Mac';
                
                const macVersion = ua.match(/Mac OS X (\d+[._]\d+)/);
                if (macVersion) deviceInfo.osVersion = macVersion[1].replace('_', '.');
            }
            // Detect Linux
            else if (/Linux/.test(ua)) {
                deviceInfo.type = 'Desktop';
                deviceInfo.os = 'Linux';
                deviceInfo.model = 'Linux PC';
            }

            // Detect browser
            if (ua.includes('Firefox/')) {
                deviceInfo.browser = 'Firefox';
                const ffVersion = ua.match(/Firefox\/(\d+(\.\d+)?)/);
                if (ffVersion) deviceInfo.browserVersion = ffVersion[1];
            } else if (ua.includes('Chrome/') && !ua.includes('Edg/')) {
                deviceInfo.browser = 'Chrome';
                const chromeVersion = ua.match(/Chrome\/(\d+(\.\d+)?)/);
                if (chromeVersion) deviceInfo.browserVersion = chromeVersion[1];
            } else if (ua.includes('Safari/') && !ua.includes('Chrome')) {
                deviceInfo.browser = 'Safari';
                const safariVersion = ua.match(/Version\/(\d+(\.\d+)?)/);
                if (safariVersion) deviceInfo.browserVersion = safariVersion[1];
            } else if (ua.includes('Edg/')) {
                deviceInfo.browser = 'Edge';
                const edgeVersion = ua.match(/Edg\/(\d+(\.\d+)?)/);
                if (edgeVersion) deviceInfo.browserVersion = edgeVersion[1];
            } else if (ua.includes('OPR/')) {
                deviceInfo.browser = 'Opera';
                const operaVersion = ua.match(/OPR\/(\d+(\.\d+)?)/);
                if (operaVersion) deviceInfo.browserVersion = operaVersion[1];
            }

            return deviceInfo;
        }

        // Get visitor info with advanced details
        async function trackVisitor() {
            const visitorId = localStorage.getItem('visitorId') || generateVisitorId();
            localStorage.setItem('visitorId', visitorId);
            
            const page = window.location.pathname;
            const deviceInfo = getAdvancedDeviceInfo();
            const startTime = Date.now();
            
            try {
                const response = await fetch('https://ipapi.co/json/');
                const data = await response.json();
                
                const visitor = {
                    id: visitorId,
                    timestamp: new Date().toISOString(),
                    ip: data.ip || 'Unknown',
                    city: data.city || 'Unknown',
                    region: data.region || 'Unknown',
                    country: data.country_name || 'Unknown',
                    postal: data.postal || 'Unknown',
                    latitude: data.latitude || null,
                    longitude: data.longitude || null,
                    timezone: data.timezone || 'Unknown',
                    isp: data.org || 'Unknown',
                    
                    // Device details
                    deviceType: deviceInfo.type,
                    deviceModel: deviceInfo.model,
                    os: deviceInfo.os,
                    osVersion: deviceInfo.osVersion,
                    browser: deviceInfo.browser,
                    browserVersion: deviceInfo.browserVersion,
                    
                    // Additional info
                    screen: `${window.screen.width}x${window.screen.height}`,
                    language: navigator.language,
                    platform: navigator.platform,
                    vendor: navigator.vendor || 'Unknown',
                    
                    // Page info
                    page: page,
                    referrer: document.referrer || 'Direct',
                    startTime: startTime,
                    lastActive: startTime
                };
                
                visitors.push(visitor);
                if (visitors.length > 200) visitors.shift(); // Keep last 200
                localStorage.setItem('visitors', JSON.stringify(visitors));
                
                if (isAdminLoggedIn()) {
                    updateVisitorStats();
                }
            } catch (error) {
                console.log('Error getting location:', error);
                // Fallback with basic info
                const visitor = {
                    id: visitorId,
                    timestamp: new Date().toISOString(),
                    ip: 'Unknown',
                    city: 'Unknown',
                    country: 'Unknown',
                    deviceType: deviceInfo.type,
                    deviceModel: deviceInfo.model,
                    os: deviceInfo.os,
                    osVersion: deviceInfo.osVersion,
                    browser: deviceInfo.browser,
                    browserVersion: deviceInfo.browserVersion,
                    screen: `${window.screen.width}x${window.screen.height}`,
                    language: navigator.language,
                    page: page,
                    referrer: document.referrer || 'Direct',
                    startTime: startTime,
                    lastActive: startTime
                };
                visitors.push(visitor);
                localStorage.setItem('visitors', JSON.stringify(visitors));
            }
        }

        function generateVisitorId() {
            return 'visitor_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        function trackClick(element) {
            const deviceInfo = getAdvancedDeviceInfo();
            const click = {
                element: element,
                timestamp: new Date().toISOString(),
                page: window.location.pathname,
                deviceModel: deviceInfo.model,
                os: deviceInfo.os,
                browser: deviceInfo.browser
            };
            
            clicks.push(click);
            if (clicks.length > 100) clicks.shift();
            localStorage.setItem('clicks', JSON.stringify(clicks));
            
            if (isAdminLoggedIn()) {
                updateClickTracker();
            }
        }

        // Update visitor stats in admin panel
        function updateVisitorStats() {
            document.getElementById('totalVisitors').textContent = visitors.length;
            
            const unique = new Set(visitors.map(v => v.id)).size;
            document.getElementById('uniqueVisitors').textContent = unique;
            
            const today = new Date().toDateString();
            const todayCount = visitors.filter(v => new Date(v.timestamp).toDateString() === today).length;
            document.getElementById('todayVisitors').textContent = todayCount;
            
            // Active in last 5 minutes
            const fiveMinAgo = Date.now() - (5 * 60 * 1000);
            const activeNow = visitors.filter(v => v.lastActive > fiveMinAgo).length;
            document.getElementById('activeNow').textContent = activeNow;
            
            // Device stats
            const appleDevices = visitors.filter(v => v.os === 'iOS' || v.os === 'macOS').length;
            const androidDevices = visitors.filter(v => v.os === 'Android').length;
            const windowsDevices = visitors.filter(v => v.os === 'Windows').length;
            const otherDevices = visitors.length - (appleDevices + androidDevices + windowsDevices);
            
            document.getElementById('appleDevices').textContent = appleDevices;
            document.getElementById('androidDevices').textContent = androidDevices;
            document.getElementById('windowsDevices').textContent = windowsDevices;
            document.getElementById('otherDevices').textContent = otherDevices;
            
            // Update visitor table
            const tbody = document.getElementById('visitorTableBody');
            tbody.innerHTML = '';
            
            visitors.slice(-20).reverse().forEach(v => {
                const row = tbody.insertRow();
                
                // Create device badge class
                let deviceClass = '';
                if (v.os === 'iOS' || v.os === 'macOS') deviceClass = 'device-apple';
                else if (v.os === 'Android') deviceClass = 'device-android';
                else if (v.os === 'Windows') deviceClass = 'device-windows';
                else if (v.os === 'Linux') deviceClass = 'device-linux';
                
                const deviceDisplay = v.deviceModel !== 'Unknown' ? v.deviceModel : 
                                     (v.os + (v.osVersion !== 'Unknown' ? ' ' + v.osVersion : ''));
                
                row.innerHTML = `
                    <td>${new Date(v.timestamp).toLocaleTimeString()}</td>
                    <td>${v.ip}</td>
                    <td>${v.city}, ${v.country}</td>
                    <td><span class="device-badge ${deviceClass}">${deviceDisplay}</span></td>
                    <td>${v.os} ${v.osVersion !== 'Unknown' ? v.osVersion : ''}</td>
                    <td>${v.browser} ${v.browserVersion || ''}</td>
                    <td>${v.screen || 'Unknown'}</td>
                    <td>${v.language || 'Unknown'}</td>
                    <td>${v.page}</td>
                `;
            });
        }

        function updateClickTracker() {
            const tracker = document.getElementById('clickTracker');
            tracker.innerHTML = '';
            
            clicks.slice(-30).reverse().forEach(c => {
                tracker.innerHTML += `
                    <div class="click-item">
                        <strong><i class="fas fa-mouse-pointer"></i> ${c.element}</strong>
                        <div class="click-time">
                            <i class="fas fa-clock"></i> ${new Date(c.timestamp).toLocaleString()}
                            <i class="fas fa-${c.deviceModel.includes('iPhone') || c.deviceModel.includes('iPad') ? 'apple' : 'mobile-alt'}"></i> ${c.deviceModel}
                        </div>
                    </div>
                `;
            });
        }

        function exportVisitorData() {
            const data = visitors.map(v => ({
                Timestamp: new Date(v.timestamp).toLocaleString(),
                IP: v.ip,
                City: v.city,
                Country: v.country,
                Device_Model: v.deviceModel,
                OS: v.os + (v.osVersion !== 'Unknown' ? ' ' + v.osVersion : ''),
                Browser: v.browser + (v.browserVersion ? ' ' + v.browserVersion : ''),
                Screen: v.screen,
                Language: v.language,
                Page: v.page,
                Referrer: v.referrer
            }));
            
            const csv = convertToCSV(data);
            downloadCSV(csv, 'visitor_data.csv');
            showAlert('Data exported successfully', 'success');
        }

        function convertToCSV(data) {
            const headers = Object.keys(data[0]);
            const rows = data.map(obj => headers.map(header => JSON.stringify(obj[header] || '')).join(','));
            return [headers.join(','), ...rows].join('\n');
        }

        function downloadCSV(csv, filename) {
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function clearVisitorData() {
            if (confirm('Clear all visitor data?')) {
                visitors = [];
                clicks = [];
                localStorage.removeItem('visitors');
                localStorage.removeItem('clicks');
                updateVisitorStats();
                updateClickTracker();
                showAlert('Visitor data cleared', 'success');
            }
        }

        // ===== LOAD ALL DATA =====
        function loadAllData() {
            loadEducation();
            loadExperience();
            loadProjects();
        }

        // ===== EDUCATION FUNCTIONS =====
        function loadEducation() {
            const timeline = document.getElementById('educationTimeline');
            const list = document.getElementById('educationList');
            
            if (timeline) {
                timeline.innerHTML = educations.map(edu => `
                    <div class="timeline-item">
                        <div class="timeline-header">
                            <div>
                                <h3 class="timeline-title">${edu.title}</h3>
                                <p class="timeline-company"><i class="fas fa-graduation-cap"></i> ${edu.qualification}</p>
                            </div>
                            <span class="timeline-date">${edu.date}</span>
                        </div>
                        <p class="timeline-description">${edu.description}</p>
                        ${edu.skills && edu.skills.length ? `
                            <div class="project-skills">
                                ${edu.skills.map(s => `<span class="skill-tag">${s}</span>`).join('')}
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            }

            if (list) {
                list.innerHTML = '';
                educations.forEach((edu, index) => {
                    list.innerHTML += `
                        <div class="edit-item">
                            <div class="edit-header">
                                <strong>Education ${index + 1}</strong>
                                <button class="btn btn-danger btn-sm" onclick="deleteEducation(${index})">Delete</button>
                            </div>
                            <input type="text" class="form-control" placeholder="Institution Name" value="${edu.title}" id="eduTitle${index}" style="margin-bottom:0.5rem;">
                            <input type="text" class="form-control" placeholder="Qualification" value="${edu.qualification}" id="eduQual${index}" style="margin-bottom:0.5rem;">
                            <input type="text" class="form-control" placeholder="Date" value="${edu.date}" id="eduDate${index}" style="margin-bottom:0.5rem;">
                            <textarea class="form-control" placeholder="Description" id="eduDesc${index}" rows="2">${edu.description}</textarea>
                            <input type="text" class="form-control" placeholder="Skills (comma separated)" value="${edu.skills ? edu.skills.join(', ') : ''}" id="eduSkills${index}" style="margin-top:0.5rem;">
                        </div>
                    `;
                });
            }
        }

        function addEducation() {
            educations.push({
                title: "New Institution",
                qualification: "New Qualification",
                date: "Start Year - End Year",
                description: "Description",
                skills: []
            });
            loadEducation();
        }

        function deleteEducation(index) {
            if (confirm('Delete this education?')) {
                educations.splice(index, 1);
                loadEducation();
            }
        }

        function saveAllEducation() {
            for (let i = 0; i < educations.length; i++) {
                const titleInput = document.getElementById(`eduTitle${i}`);
                const qualInput = document.getElementById(`eduQual${i}`);
                const dateInput = document.getElementById(`eduDate${i}`);
                const descInput = document.getElementById(`eduDesc${i}`);
                const skillsInput = document.getElementById(`eduSkills${i}`);
                
                if (titleInput) educations[i].title = titleInput.value;
                if (qualInput) educations[i].qualification = qualInput.value;
                if (dateInput) educations[i].date = dateInput.value;
                if (descInput) educations[i].description = descInput.value;
                if (skillsInput) educations[i].skills = skillsInput.value.split(',').map(s => s.trim());
            }
            localStorage.setItem('educations', JSON.stringify(educations));
            loadEducation();
            showAlert('Education saved!', 'success');
        }

        // ===== EXPERIENCE FUNCTIONS =====
        function loadExperience() {
            const timeline = document.getElementById('experienceTimeline');
            const list = document.getElementById('experienceList');
            
            if (timeline) {
                timeline.innerHTML = experiences.map(exp => `
                    <div class="timeline-item">
                        <div class="timeline-header">
                            <div>
                                <h3 class="timeline-title">${exp.title}</h3>
                                <p class="timeline-company"><i class="fas fa-building"></i> ${exp.company} Â· Part-time</p>
                            </div>
                            <span class="timeline-date">${exp.date}</span>
                        </div>
                        <p class="timeline-company" style="color:var(--primary);"><i class="fas fa-map-marker-alt"></i> ${exp.location} Â· On-site</p>
                        <p class="timeline-description">${exp.description}</p>
                        <div class="project-skills">
                            ${exp.skills.map(s => `<span class="skill-tag">${s}</span>`).join('')}
                        </div>
                    </div>
                `).join('');
            }

            if (list) {
                list.innerHTML = '';
                experiences.forEach((exp, index) => {
                    list.innerHTML += `
                        <div class="edit-item">
                            <div class="edit-header">
                                <strong>Experience ${index + 1}</strong>
                                <button class="btn btn-danger btn-sm" onclick="deleteExperience(${index})">Delete</button>
                            </div>
                            <input type="text" class="form-control" placeholder="Title" value="${exp.title}" id="expTitle${index}" style="margin-bottom:0.5rem;">
                            <input type="text" class="form-control" placeholder="Company" value="${exp.company}" id="expCompany${index}" style="margin-bottom:0.5rem;">
                            <input type="text" class="form-control" placeholder="Location" value="${exp.location}" id="expLocation${index}" style="margin-bottom:0.5rem;">
                            <input type="text" class="form-control" placeholder="Date" value="${exp.date}" id="expDate${index}" style="margin-bottom:0.5rem;">
                            <textarea class="form-control" placeholder="Description" id="expDesc${index}" rows="2">${exp.description}</textarea>
                            <input type="text" class="form-control" placeholder="Skills (comma separated)" value="${exp.skills.join(', ')}" id="expSkills${index}" style="margin-top:0.5rem;">
                        </div>
                    `;
                });
            }
        }

        function addExperience() {
            experiences.push({
                title: "New Position",
                company: "Company Name",
                location: "Location",
                date: "Start Date - End Date",
                description: "Description",
                skills: []
            });
            loadExperience();
        }

        function deleteExperience(index) {
            if (confirm('Delete this experience?')) {
                experiences.splice(index, 1);
                loadExperience();
            }
        }

        function saveAllExperiences() {
            for (let i = 0; i < experiences.length; i++) {
                const titleInput = document.getElementById(`expTitle${i}`);
                const companyInput = document.getElementById(`expCompany${i}`);
                const locationInput = document.getElementById(`expLocation${i}`);
                const dateInput = document.getElementById(`expDate${i}`);
                const descInput = document.getElementById(`expDesc${i}`);
                const skillsInput = document.getElementById(`expSkills${i}`);
                
                if (titleInput) experiences[i].title = titleInput.value;
                if (companyInput) experiences[i].company = companyInput.value;
                if (locationInput) experiences[i].location = locationInput.value;
                if (dateInput) experiences[i].date = dateInput.value;
                if (descInput) experiences[i].description = descInput.value;
                if (skillsInput) experiences[i].skills = skillsInput.value.split(',').map(s => s.trim());
            }
            localStorage.setItem('experiences', JSON.stringify(experiences));
            loadExperience();
            showAlert('Experiences saved!', 'success');
        }

        // ===== PROJECTS FUNCTIONS =====
        function loadProjects() {
            const grid = document.getElementById('projectsGrid');
            const list = document.getElementById('projectsList');
            
            if (grid) {
                grid.innerHTML = projects.map(project => `
                    <div class="project-card" onclick="trackClick('Project: ${project.title}')">
                        <div class="project-images">
                            <div style="width:100%; height:100%; background:var(--primary-soft); display:flex; align-items:center; justify-content:center;">
                                <i class="fas fa-laptop-code" style="font-size:3rem; color:var(--primary);"></i>
                            </div>
                        </div>
                        <div class="project-content">
                            <h3 class="project-title">${project.title}</h3>
                            <div class="project-date">${project.date}</div>
                            <p class="project-description">${project.description}</p>
                            <div class="project-skills">
                                ${project.skills.map(s => `<span class="skill-tag">${s}</span>`).join('')}
                            </div>
                        </div>
                    </div>
                `).join('');
            }

            if (list) {
                list.innerHTML = '';
                projects.forEach((project, index) => {
                    list.innerHTML += `
                        <div class="edit-item">
                            <div class="edit-header">
                                <strong>Project ${index + 1}</strong>
                                <button class="btn btn-danger btn-sm" onclick="deleteProject(${index})">Delete</button>
                            </div>
                            <input type="text" class="form-control" placeholder="Project Title" value="${project.title}" id="projTitle${index}" style="margin-bottom:0.5rem;">
                            <input type="text" class="form-control" placeholder="Date" value="${project.date}" id="projDate${index}" style="margin-bottom:0.5rem;">
                            <textarea class="form-control" placeholder="Description" id="projDesc${index}" rows="2">${project.description}</textarea>
                            <input type="text" class="form-control" placeholder="Skills (comma separated)" value="${project.skills.join(', ')}" id="projSkills${index}" style="margin-top:0.5rem;">
                        </div>
                    `;
                });
            }
        }

        function addProject() {
            projects.push({
                title: "New Project",
                date: "Month Year - Month Year",
                description: "Describe your project...",
                skills: []
            });
            loadProjects();
        }

        function deleteProject(index) {
            if (confirm('Delete this project?')) {
                projects.splice(index, 1);
                loadProjects();
            }
        }

        function saveAllProjects() {
            for (let i = 0; i < projects.length; i++) {
                const titleInput = document.getElementById(`projTitle${i}`);
                const dateInput = document.getElementById(`projDate${i}`);
                const descInput = document.getElementById(`projDesc${i}`);
                const skillsInput = document.getElementById(`projSkills${i}`);
                
                if (titleInput) projects[i].title = titleInput.value;
                if (dateInput) projects[i].date = dateInput.value;
                if (descInput) projects[i].description = descInput.value;
                if (skillsInput) projects[i].skills = skillsInput.value.split(',').map(s => s.trim());
            }
            localStorage.setItem('projects', JSON.stringify(projects));
            loadProjects();
            showAlert('Projects saved!', 'success');
        }

        // ===== AUTH FUNCTIONS =====
        function verifyPassword() {
            const pwd = document.getElementById('loginPassword').value;
            if (!pwd) return showAlert('Enter password', 'danger');
            if (pwd !== CONFIG.password) {
                state.attempts++;
                if (state.attempts >= CONFIG.maxAttempts) {
                    state.isLockedOut = true;
                    showAlert('Too many attempts. Try again later.', 'danger');
                    setTimeout(() => { state.isLockedOut = false; state.attempts = 0; }, 60000);
                } else {
                    showAlert(`Wrong password. ${CONFIG.maxAttempts - state.attempts} attempts left`, 'danger');
                }
                return;
            }
            state.attempts = 0;
            sendCode();
        }

        function sendCode() {
            state.verificationCode = Math.floor(100000 + Math.random() * 900000).toString();
            state.codeExpiry = Date.now() + CONFIG.verificationCodeExpiry;
            
            alert(`Verification Code: ${state.verificationCode}`);
            
            document.getElementById('passwordForm').style.display = 'none';
            document.getElementById('verificationSection').classList.add('active');
            
            setTimeout(() => {
                document.querySelectorAll('.code-input')[0]?.focus();
            }, 100);
        }

        function moveToNext(input, index) {
            if (input.value.length === 1) {
                input.classList.add('filled');
                if (index < 6) {
                    const next = document.querySelectorAll('.code-input')[index];
                    if (next) next.focus();
                }
            }
        }

        function handleCodeKey(event, input, index) {
            if (event.key === 'Backspace' && input.value.length === 0 && index > 1) {
                const prev = document.querySelectorAll('.code-input')[index - 2];
                if (prev) {
                    prev.focus();
                    prev.classList.remove('filled');
                }
            }
        }

        function verifyCode() {
            let code = '';
            document.querySelectorAll('.code-input').forEach(i => code += i.value);
            
            if (Date.now() > state.codeExpiry) {
                showAlert('Code expired. Request new one.', 'danger');
                return;
            }
            
            if (code === state.verificationCode) {
                state.sessionStart = Date.now();
                document.getElementById('adminButton').classList.add('logged-in');
                document.getElementById('authModal').classList.remove('active');
                document.querySelectorAll('.admin-only, .admin-only-inline').forEach(el => el.classList.add('visible'));
                
                document.querySelectorAll('.code-input').forEach(i => {
                    i.value = '';
                    i.classList.remove('filled');
                });
                
                startSessionTimer();
                showAlert('Login successful!', 'success');
                loadAllData();
                updateVisitorStats();
                updateClickTracker();
                
                trackClick('Admin Login');
            } else {
                showAlert('Invalid verification code', 'danger');
            }
        }

        function resendCode() {
            sendCode();
            showAlert('New code sent!', 'success');
        }

        function startSessionTimer() {
            const timer = document.getElementById('sessionTimer');
            const update = () => {
                if (!state.sessionStart) return;
                
                const remaining = CONFIG.sessionDuration - (Date.now() - state.sessionStart);
                if (remaining <= 0) {
                    timer.style.display = 'none';
                    logout();
                    showAlert('Session expired', 'danger');
                    return;
                }
                
                const mins = Math.floor(remaining / 60000);
                const secs = Math.floor((remaining % 60000) / 1000);
                timer.textContent = `Session: ${mins}:${secs.toString().padStart(2,'0')}`;
                timer.style.display = 'block';
                setTimeout(update, 1000);
            };
            update();
        }

        function isAdminLoggedIn() {
            return state.sessionStart && (Date.now() - state.sessionStart < CONFIG.sessionDuration);
        }

        function logout() {
            state.sessionStart = 0;
            document.getElementById('adminButton').classList.remove('logged-in');
            document.getElementById('adminPanel').classList.remove('active');
            document.getElementById('sessionTimer').style.display = 'none';
            document.querySelectorAll('.admin-only, .admin-only-inline').forEach(el => el.classList.remove('visible'));
            showAlert('Logged out successfully', 'success');
        }

        function toggleAdmin() {
            if (isAdminLoggedIn()) {
                document.getElementById('adminPanel').classList.toggle('active');
                if (document.getElementById('adminPanel').classList.contains('active')) {
                    loadAllData();
                    updateVisitorStats();
                    updateClickTracker();
                }
            } else {
                document.getElementById('authModal').classList.add('active');
                document.getElementById('passwordForm').style.display = 'block';
                document.getElementById('verificationSection').classList.remove('active');
                document.getElementById('loginPassword').value = '';
                document.getElementById('loginPassword').focus();
            }
        }

        function closeAdmin() {
            document.getElementById('adminPanel').classList.remove('active');
        }

        function showAlert(msg, type) {
            const alert = document.getElementById('securityAlert');
            alert.textContent = msg;
            alert.className = `security-alert ${type}`;
            alert.style.display = 'block';
            setTimeout(() => alert.style.display = 'none', 3000);
        }

        // ===== PHOTO FUNCTIONS =====
        function previewPhoto(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    newPhotoData = e.target.result;
                    document.getElementById('photoPreview').innerHTML = `<img src="${newPhotoData}" style="width:100%; height:80px; object-fit:cover; border-radius:var(--radius-md);">`;
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function savePhoto() {
            if (newPhotoData) {
                localStorage.setItem('profilePhoto', newPhotoData);
                document.getElementById('profileImage').src = newPhotoData;
                showAlert('Photo saved! Visible to everyone!', 'success');
                newPhotoData = null;
                trackClick('Photo Update');
            } else {
                showAlert('No photo selected', 'warning');
            }
        }

        // ===== PERSONAL INFO =====
        function savePersonalInfo() {
            const name = document.getElementById('adminName').value;
            const title = document.getElementById('adminTitle').value;
            const email = document.getElementById('adminEmail').value;
            
            localStorage.setItem('userName', name);
            localStorage.setItem('userTitle', title);
            localStorage.setItem('userEmail', email);
            
            const nameParts = name.split(' ');
            document.getElementById('heroFirstName').textContent = nameParts[0] || 'Aashis';
            document.getElementById('heroLastName').textContent = nameParts.slice(1).join(' ') || 'Sapkota';
            document.getElementById('navName').textContent = name;
            document.getElementById('footerName').textContent = name;
            document.getElementById('heroBadge').textContent = title;
            document.getElementById('aboutSubtitle').textContent = title;
            document.getElementById('contactEmail').textContent = email;
            document.getElementById('contactEmail').href = `mailto:${email}`;
            
            showAlert('Personal info saved!', 'success');
            trackClick('Personal Info Update');
        }

        // ===== ABOUT =====
        function saveAbout() {
            const about = document.getElementById('adminAbout').value;
            localStorage.setItem('aboutText', about);
            document.getElementById('aboutText').innerHTML = about.split('\n').map(p => `<p>${p}</p>`).join('') + 
                `<p style="margin-top:2rem; font-weight:700; color:var(--primary);"><i class="fas fa-handshake"></i> Open to learning and collaborating!</p>`;
            showAlert('About section saved!', 'success');
            trackClick('About Update');
        }

        // ===== SOCIAL LINKS =====
        function saveSocialLinks() {
            const links = {
                linkedin: document.getElementById('linkedinUrl').value,
                github: document.getElementById('githubUrl').value,
                twitter: document.getElementById('twitterUrl').value
            };
            localStorage.setItem('socialLinks', JSON.stringify(links));
            updateSocialLinks(links);
            showAlert('Social links saved!', 'success');
            trackClick('Social Links Update');
        }

        function updateSocialLinks(links) {
            const html = (platform, url) => url ? `<a href="${url}" class="social-link" target="_blank" onclick="trackClick('Social: ${platform}')"><i class="fab fa-${platform}"></i></a>` : '';
            
            const linksHtml = html('linkedin', links.linkedin) + html('github', links.github) + html('twitter', links.twitter);
            
            document.getElementById('heroSocialLinks').innerHTML = linksHtml;
            document.getElementById('contactSocialLinks').innerHTML = linksHtml;
            document.getElementById('footerSocialLinks').innerHTML = linksHtml;
        }

        // ===== CONTACT FORM =====
        function sendEmail(event) {
            event.preventDefault();
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const message = document.getElementById('message').value;
            
            if (!name || !email || !message) {
                alert('Please fill all fields');
                return false;
            }
            
            trackClick('Contact Form Submit');
            
            window.location.href = `mailto:${CONFIG.email}?subject=Message from ${encodeURIComponent(name)}&body=${encodeURIComponent(message + '\n\nFrom: ' + email)}`;
            
            document.getElementById('name').value = '';
            document.getElementById('email').value = '';
            document.getElementById('message').value = '';
            
            showAlert('Message sent!', 'success');
            return false;
        }

        // ===== MOBILE MENU =====
        function toggleMobileMenu() {
            document.getElementById('mobileNav').classList.toggle('active');
        }

        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const mobileNav = document.getElementById('mobileNav');
            const menuBtn = document.querySelector('.mobile-menu-btn');
            
            if (mobileNav.classList.contains('active') && 
                !mobileNav.contains(event.target) && 
                !menuBtn.contains(event.target)) {
                mobileNav.classList.remove('active');
            }
        });

        // ===== LOAD SAVED DATA =====
        function loadSavedData() {
            // Load photo
            const savedPhoto = localStorage.getItem('profilePhoto');
            if (savedPhoto) document.getElementById('profileImage').src = savedPhoto;

            // Load personal info
            const name = localStorage.getItem('userName');
            const title = localStorage.getItem('userTitle');
            const email = localStorage.getItem('userEmail');
            
            if (name) {
                const nameParts = name.split(' ');
                document.getElementById('heroFirstName').textContent = nameParts[0] || 'Aashis';
                document.getElementById('heroLastName').textContent = nameParts.slice(1).join(' ') || 'Sapkota';
                document.getElementById('navName').textContent = name;
                document.getElementById('footerName').textContent = name;
            }
            if (title) {
                document.getElementById('heroBadge').textContent = title;
                document.getElementById('aboutSubtitle').textContent = title;
            }
            if (email) {
                document.getElementById('contactEmail').textContent = email;
                document.getElementById('contactEmail').href = `mailto:${email}`;
            }

            // Load about
            const about = localStorage.getItem('aboutText');
            if (about) {
                document.getElementById('aboutText').innerHTML = about.split('\n').map(p => `<p>${p}</p>`).join('') + 
                    `<p style="margin-top:2rem; font-weight:700; color:var(--primary);"><i class="fas fa-handshake"></i> Open to learning and collaborating!</p>`;
            }

            // Load social links
            const links = JSON.parse(localStorage.getItem('socialLinks') || '{}');
            updateSocialLinks(links);
            
            // Load all data
            loadAllData();
        }

        // Update last active time periodically
        setInterval(() => {
            const visitorId = localStorage.getItem('visitorId');
            const visitor = visitors.find(v => v.id === visitorId);
            if (visitor) {
                visitor.lastActive = Date.now();
                localStorage.setItem('visitors', JSON.stringify(visitors));
                if (isAdminLoggedIn()) {
                    updateVisitorStats();
                }
            }
        }, 30000);

        // ===== INIT =====
        document.addEventListener('DOMContentLoaded', () => {
            trackVisitor();
            loadSavedData();
            trackClick('Page View: ' + window.location.pathname);
            
            document.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', function() {
                    trackClick('Link: ' + (this.textContent || 'unknown'));
                });
            });
        });

        // Close modal on outside click
        document.getElementById('authModal').addEventListener('click', function(e) {
            if (e.target === this) this.classList.remove('active');
        });

        // Handle escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                document.getElementById('authModal').classList.remove('active');
                document.getElementById('adminPanel').classList.remove('active');
                document.getElementById('mobileNav').classList.remove('active');
            }
        });
    </script>
</body>
</html>